<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-12-04 Tue 19:10 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RFC7233: Hypertext Transfer Protocol (HTTP/1.1): Range Requests</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
* {
  box-sizing: border-box;
}

html {
  padding: 0;
}

body {
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  font-size: 15px;
  line-height: 1.6;
  padding: 0;
  margin: 0;
  color: #24292e;
  word-wrap: break-word;
}

b, strong {
  font-weight: 700;
}

p {
  margin: 0 0 16px;
}

a {
  color: #0366d6;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

a:active, a:hover {
  outline-width: 0;
}

.underline{
  text-decoration: underline;
}

del{
  text-decoration: line-through;
}

i {
  font-style: italic;
}

ul, ol {
  padding-left: 1em;
}

ruby {
  border-bottom: 1px solid #d9d9d9;
}

ruby > rt {
  color: #6a737d;
  text-align: center;
}

h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25;
}

h1.title {
  padding-bottom: 0.3em;
  font-size: 2em;
  border-bottom: 1px solid #eaecef;
}

.outline-2 h1 {
  font-size: 2.5em;
}

.outline-2 h2 {
  padding-bottom: 0.3em;
  font-size: 2em;
  border-bottom: 1px solid #eaecef;
}

.outline-2 h3 {
  padding-bottom: 0.3em;
  font-size: 1.5em;
  border-bottom: 1px solid #eaecef;
}

.outline-2 h4 {
  font-size: 1.25em
}

.outline-2 h5 {
  font-size: 1.1em
}

.outline-2 h6 {
  font-size: 1.1em
}

.outline-2 code {
  padding: 0.2em 0.4em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(27,31,35,0.05);
  border-radius: 3px;

  color: #c7254e;
  background-color: #f9f2f4;
  white-space: normal;
  font-family: Consolas,Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,sans-serif;
}

.outline-2 table{
  width: 100%;
}

.org-ul,
.org-ol,
.org-dl,
.org-dl > dt,
.org-dl > dd,
.outline-2 p,
.outline-2 blockquote,
.outline-2 table,
.outline-2 pre {
  margin-top: 0;
  margin-bottom: 16px;
}

.org-ul,
.org-ol,
.org-dl {
  padding-left: 2em;
}

.org-dl > dt {
  float: left;
  max-width: 40%;
  margin-bottom: 3px;
  margin-right: 2em;
  font-size: 110%;
  font-family: Courier New;
  font-weight: bolder;
  color: #1c3030;
  clear: left;
}

.org-dl > dd {
  text-align: justify;
  margin-bottom: 14pt;
  overflow: hidden;
  clear: right;
}

table tbody tr:nth-child(odd){
  background-color: #efefef;
}

.org-center {
  text-align: center;
}

.org-left {
  text-align: left;
}

.org-right {
  text-align: right;
}

pre,
blockquote {
  margin-bottom: 1em;
}

pre {
  margin: 0;
  padding: 1em;
  line-height: 1.45;
  font-size: 95%;
  font-family: Consolas,Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,sans-serif;
  border-radius: 3px;
  overflow: auto;
}

blockquote {
  padding: 0 1em;
  color: #6a737d;
  border-left: 0.25em solid #dfe2e5;
  margin: 0;
}

.org-src-container, .example {
  width: 100%;
  overflow-x: auto;
  border-left: 0.25em solid #dfe2e5;
  border-radius: 0.5rem;
  background-color: #f6f8fa;
  margin-bottom: 16px;
}

.org-src-container pre {
  margin-bottom: 0;
}

.timestamp {
  font-family: Courier New;
  color: #888888;
}

#table-of-contents {
  font-size: 9pt;
  position: fixed;
  right: 0em;
  top: 0em;
  background: white;
  -webkit-box-shadow: 0 0 1em #777777;
  -moz-box-shadow: 0 0 1em #777777;
  -webkit-border-bottom-left-radius: 5px;
  -moz-border-radius-bottomleft: 5px;
  text-align: right;
  max-height: 80%;
  overflow: auto;
  z-index: 200;
}

#table-of-contents h2 {
  font-size: 14px;
  font-weight: normal;
  padding: 0 .5em;
  margin: 16px 0;
  text-align: left;
}

#table-of-contents ul {
  margin-left: 14pt;
  margin-bottom: 10pt;
  padding: 0
}

#table-of-contents li {
  padding: 0;
  margin: 1px;
  list-style: none;
}

#table-of-contents ul>:first-child {
  color: blue;
}

#table-of-contents #text-table-of-contents {
  display: none;
  text-align: left;
}

#table-of-contents:hover #text-table-of-contents {
  display: block;
  padding: 0.5em;
  margin-top: -1.5em;
}

#content {
  width: 980px;
  padding: 45px 15px 15px 15px;
  margin-right: auto;
  margin-left: auto;
}

@media screen and (max-width: 980px) {
  #content {
    width: 100%;
  }
  #table-of-contents {
    float: right;
    border: 1px solid #CCC;
    max-width: 75%;
    overflow: auto;
  }
  .org-dl > dt {
    float: none;
  }
}

.footdef {
}
.footdef sup {
  float: left;
  width: 3em;
}
.footdef > .footpara {
  margin-left: 3em;
  overflow-x: hidden;
}
.org-src-container {
  width: 100%;
  overflow-x: auto;
}
.github-repo {
  position: absolute;
  top: 0;
  left: -24px;
  margin-top: 32px;
  padding: 0 20px 0 40px;
  background-color: rgba(0,0,0,.2);
  height: 22px;
  line-height: 22px;
  padding-left: 42px;
  transform: rotate(-45deg);
  transform-origin: 40% 50%;
}
.github-repo:hover,
.github-repo:active {
  text-decoration: none;
}
.github-repo svg {
  position: absolute;
  width: 18px;
  height: 18px;
  left: 20px;
  top: 2px;
}
.github-repo span {
  color: #fff;
}
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">RFC7233: Hypertext Transfer Protocol (HTTP/1.1): Range Requests</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2133284">Abstract</a></li>
<li><a href="#org50d643c">Status of This Memo</a></li>
<li><a href="#org40d730c">Copyright Notice</a></li>
<li><a href="#org187266d">1. Introduction</a>
<ul>
<li><a href="#org3dbeb4b">1.1. Conformance and Error Handling</a></li>
<li><a href="#org592fb75">1.2. Syntax Notation</a></li>
</ul>
</li>
<li><a href="#org964cdff">2. Range Units</a>
<ul>
<li><a href="#org8186894">2.1. Byte Ranges</a></li>
<li><a href="#org13c9f8f">2.2. Other Range Units</a></li>
<li><a href="#org6b1d683">2.3. Accept-Ranges</a></li>
</ul>
</li>
<li><a href="#orgabdd4b0">3. Range Requests</a>
<ul>
<li><a href="#orgf26e511">3.1. Range</a></li>
<li><a href="#org79d4a85">3.2. If-Range</a></li>
</ul>
</li>
<li><a href="#org3bb2822">4. Responses to a Range Request</a>
<ul>
<li><a href="#org2d91892">4.1. 206 Partial Content</a></li>
<li><a href="#org96d66d2">4.2. Content-Range</a></li>
<li><a href="#orgbffe853">4.3. Combining Ranges</a></li>
<li><a href="#org9a26c49">4.4. 416 Range Not Satisfiable</a></li>
</ul>
</li>
<li><a href="#orga5fdf53">5. IANA Considerations</a>
<ul>
<li><a href="#org4c965e1">5.1. Range Unit Registry</a>
<ul>
<li><a href="#orgd9e592f">5.1.1. Procedure</a></li>
<li><a href="#orgc516e6b">5.1.2. Registrations</a></li>
</ul>
</li>
<li><a href="#orge3c1e57">5.2. Status Code Registration</a></li>
<li><a href="#org750fe0c">5.3. Header Field Registration</a></li>
<li><a href="#orgad4c2a6">5.4. Internet Media Type Registration</a>
<ul>
<li><a href="#org5f297a0">5.4.1. Internet Media Type multipart/byteranges</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org07a40e2">6. Security Considerations</a>
<ul>
<li><a href="#org4e7ae40">6.1. Denial-of-Service Attacks Using Range</a></li>
</ul>
</li>
<li><a href="#org0a72d12">7. Acknowledgments</a></li>
<li><a href="#orgbeb3402">8. References</a>
<ul>
<li><a href="#orgc0979c4">8.1. Normative References</a></li>
<li><a href="#org199c976">8.2. Informative References</a></li>
</ul>
</li>
<li><a href="#org3530ef3">Appendix A. Internet Media Type multipart/byteranges</a></li>
<li><a href="#org0d1b044">Appendix B. Changes from RFC 2616</a></li>
<li><a href="#orgacb9ec2">Appendix C. Imported ABNF</a></li>
<li><a href="#org5d79cab">Appendix D. Collected ABNF</a></li>
<li><a href="#org020c35c">Index</a></li>
<li><a href="#org212efb0">Authors' Addresses</a></li>
</ul>
</div>
</div>
<a class="github-repo" href="https://github.com/duoani/HTTP-RFCs.zh-cn">
  <svg height="18" width="18" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
  <span>View Repo</span>
</a>

<a href="https://github.com/duoani/HTTP-RFCs.zh-cn">
  <img alt="" src="https://img.shields.io/github/license/duoani/HTTP-RFCs.zh-cn.svg?style=social"/>
</a>
<a href="https://github.com/duoani/HTTP-RFCs.zh-cn">
  <img src="https://img.shields.io/github/stars/duoani/HTTP-RFCs.zh-cn.svg?style=social&label=Stars"/>
</a>

<div class="org-src-container">
<pre class="src src-text">                                                       PROPOSED STANDARD
                                                            Errata Exist
Internet Engineering Task Force (IETF)                  R. Fielding, Ed.
Request for Comments: 7233                                         Adobe
Obsoletes: 2616                                            Y. Lafon, Ed.
Category: Standards Track                                            W3C
ISSN: 2070-1721                                          J. Reschke, Ed.
                                                              greenbytes
                                                              June 2014
</pre>
</div>

<div id="outline-container-org2133284" class="outline-2">
<h2 id="org2133284">Abstract</h2>
<div class="outline-text-2" id="text-org2133284">
<p>
The Hypertext Transfer Protocol (HTTP) is a stateless application-level protocol for distributed, collaborative, hypertext information systems. This document defines range requests and the rules for constructing and combining responses to those requests.
</p>
</div>
</div>

<div id="outline-container-org50d643c" class="outline-2">
<h2 id="org50d643c">Status of This Memo</h2>
<div class="outline-text-2" id="text-org50d643c">
<p>
This is an Internet Standards Track document.
</p>

<p>
This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in Section 2 of RFC 5741.
</p>

<p>
Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at <a href="http://www.rfc-editor.org/info/rfc7233">http://www.rfc-editor.org/info/rfc7233</a>.
</p>
</div>
</div>

<div id="outline-container-org40d730c" class="outline-2">
<h2 id="org40d730c">Copyright Notice</h2>
<div class="outline-text-2" id="text-org40d730c">
<p>
Copyright © 2014 IETF Trust and the persons identified as the document authors. All rights reserved.
</p>

<p>
This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.
</p>

<p>
This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008. The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.
</p>
</div>
</div>

<div id="outline-container-org187266d" class="outline-2">
<h2 id="org187266d">1. Introduction</h2>
<div class="outline-text-2" id="text-org187266d">
<p>
Hypertext Transfer Protocol (HTTP) clients often encounter interrupted data transfers as a result of canceled requests or dropped connections. When a client has stored a partial representation, it is desirable to request the remainder of that representation in a subsequent request rather than transfer the entire representation. Likewise, devices with limited local storage might benefit from being able to request only a subset of a larger representation, such as a single page of a very large document, or the dimensions of an embedded image.
</p>

<p>
This document defines HTTP/1.1 range requests, partial responses, and the multipart/byteranges media type. Range requests are an OPTIONAL feature of HTTP, designed so that recipients not implementing this feature (or not supporting it for the target resource) can respond as if it is a normal GET request without impacting interoperability. Partial responses are indicated by a distinct status code to not be mistaken for full responses by caches that might not implement the feature.
</p>

<p>
Although the range request mechanism is designed to allow for extensible range types, this specification only defines requests for byte ranges.
</p>
</div>

<div id="outline-container-org3dbeb4b" class="outline-3">
<h3 id="org3dbeb4b">1.1. Conformance and Error Handling</h3>
<div class="outline-text-3" id="text-org3dbeb4b">
<p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in [RFC2119].
</p>

<p>
Conformance criteria and considerations regarding error handling are defined in Section 2.5 of [RFC7230].
</p>
</div>
</div>

<div id="outline-container-org592fb75" class="outline-3">
<h3 id="org592fb75">1.2. Syntax Notation</h3>
<div class="outline-text-3" id="text-org592fb75">
<p>
This specification uses the Augmented Backus-Naur Form (ABNF) notation of [RFC5234] with a list extension, defined in Section 7 of [RFC7230], that allows for compact definition of comma-separated lists using a '#' operator (similar to how the '*' operator indicates repetition). Appendix C describes rules imported from other documents. Appendix D shows the collected grammar with all list operators expanded to standard ABNF notation.
</p>
</div>
</div>
</div>

<div id="outline-container-org964cdff" class="outline-2">
<h2 id="org964cdff">2. Range Units</h2>
<div class="outline-text-2" id="text-org964cdff">
<p>
A representation can be partitioned into subranges according to various structural units, depending on the structure inherent in the representation's media type. This "range unit" is used in the Accept-Ranges (Section 2.3) response header field to advertise support for range requests, the Range (Section 3.1) request header field to delineate the parts of a representation that are requested, and the Content-Range (Section 4.2) payload header field to describe which part of a representation is being transferred.
</p>

<div class="org-src-container">
<pre class="src src-text">range-unit       = bytes-unit / other-range-unit
</pre>
</div>
</div>

<div id="outline-container-org8186894" class="outline-3">
<h3 id="org8186894">2.1. Byte Ranges</h3>
<div class="outline-text-3" id="text-org8186894">
<p>
Since representation data is transferred in payloads as a sequence of octets, a byte range is a meaningful substructure for any representation transferable over HTTP (Section 3 of [RFC7231]). The "bytes" range unit is defined for expressing subranges of the data's octet sequence.
</p>

<div class="org-src-container">
<pre class="src src-text">bytes-unit       = "bytes"
</pre>
</div>

<p>
A byte-range request can specify a single range of bytes or a set of ranges within a single representation.
</p>

<div class="org-src-container">
<pre class="src src-text">byte-ranges-specifier = bytes-unit "=" byte-range-set
byte-range-set  = 1#( byte-range-spec / suffix-byte-range-spec )
byte-range-spec = first-byte-pos "-" [ last-byte-pos ]
first-byte-pos  = 1*DIGIT
last-byte-pos   = 1*DIGIT
</pre>
</div>

<p>
The first-byte-pos value in a byte-range-spec gives the byte-offset of the first byte in a range. The last-byte-pos value gives the byte-offset of the last byte in the range; that is, the byte positions specified are inclusive. Byte offsets start at zero.
</p>

<p>
Examples of byte-ranges-specifier values:
</p>

<ul class="org-ul">
<li><p>
The first 500 bytes (byte offsets 0-499, inclusive):
</p>

<pre class="example">
bytes=0-499
</pre></li>

<li><p>
The second 500 bytes (byte offsets 500-999, inclusive):
</p>

<pre class="example">
bytes=500-999
</pre></li>
</ul>

<p>
A byte-range-spec is invalid if the last-byte-pos value is present and less than the first-byte-pos.
</p>

<p>
A client can limit the number of bytes requested without knowing the size of the selected representation. If the last-byte-pos value is absent, or if the value is greater than or equal to the current length of the representation data, the byte range is interpreted as the remainder of the representation (i.e., the server replaces the value of last-byte-pos with a value that is one less than the current length of the selected representation).
</p>

<p>
A client can request the last N bytes of the selected representation using a suffix-byte-range-spec.
</p>

<div class="org-src-container">
<pre class="src src-text">suffix-byte-range-spec = "-" suffix-length
suffix-length = 1*DIGIT
</pre>
</div>

<p>
If the selected representation is shorter than the specified suffix-length, the entire representation is used.
</p>

<p>
Additional examples, assuming a representation of length 10000:
</p>

<ul class="org-ul">
<li><p>
The final 500 bytes (byte offsets 9500-9999, inclusive):
</p>

<pre class="example">
bytes=-500
</pre>

<p>
Or:
</p>

<pre class="example">
bytes=9500-
</pre></li>

<li><p>
The first and last bytes only (bytes 0 and 9999):
</p>

<pre class="example">
bytes=0-0,-1
</pre></li>

<li><p>
Other valid (but not canonical) specifications of the second 500 bytes (byte offsets 500-999, inclusive):
</p>

<pre class="example">
bytes=500-600,601-999
bytes=500-700,601-999
</pre></li>
</ul>

<p>
If a valid byte-range-set includes at least one byte-range-spec with a first-byte-pos that is less than the current length of the representation, or at least one suffix-byte-range-spec with a non-zero suffix-length, then the byte-range-set is satisfiable. Otherwise, the byte-range-set is unsatisfiable.
</p>

<p>
In the byte-range syntax, first-byte-pos, last-byte-pos, and suffix-length are expressed as decimal number of octets. Since there is no predefined limit to the length of a payload, recipients MUST anticipate potentially large decimal numerals and prevent parsing errors due to integer conversion overflows.
</p>
</div>
</div>

<div id="outline-container-org13c9f8f" class="outline-3">
<h3 id="org13c9f8f">2.2. Other Range Units</h3>
<div class="outline-text-3" id="text-org13c9f8f">
<p>
Range units are intended to be extensible. New range units ought to be registered with IANA, as defined in Section 5.1.
</p>

<div class="org-src-container">
<pre class="src src-text">other-range-unit = token
</pre>
</div>
</div>
</div>

<div id="outline-container-org6b1d683" class="outline-3">
<h3 id="org6b1d683"><a id="ID-cf601084-e3af-41bc-9ff7-8f903ca59fa8"></a>2.3. Accept-Ranges</h3>
<div class="outline-text-3" id="text-org6b1d683">
<p>
The "Accept-Ranges" header field allows a server to indicate that it supports range requests for the target resource.
</p>

<div class="org-src-container">
<pre class="src src-text">Accept-Ranges     = acceptable-ranges
acceptable-ranges = 1#range-unit / "none"
</pre>
</div>

<p>
An origin server that supports byte-range requests for a given target resource MAY send
</p>

<pre class="example">
Accept-Ranges: bytes
</pre>

<p>
to indicate what range units are supported. A client MAY generate range requests without having received this header field for the resource involved. Range units are defined in Section 2.
</p>

<p>
A server that does not support any kind of range request for the target resource MAY send
</p>

<pre class="example">
Accept-Ranges: none
</pre>

<p>
to advise the client not to attempt a range request.
</p>
</div>
</div>
</div>

<div id="outline-container-orgabdd4b0" class="outline-2">
<h2 id="orgabdd4b0">3. Range Requests</h2>
<div class="outline-text-2" id="text-orgabdd4b0">
</div>
<div id="outline-container-orgf26e511" class="outline-3">
<h3 id="orgf26e511"><a id="ID-a70b4aaa-f776-4d5b-a31d-60d1ad16d85e"></a>3.1. Range</h3>
<div class="outline-text-3" id="text-orgf26e511">
<p>
The "Range" header field on a GET request modifies the method semantics to request transfer of only one or more subranges of the selected representation data, rather than the entire selected representation data.
</p>

<div class="org-src-container">
<pre class="src src-text">Range = byte-ranges-specifier / other-ranges-specifier
other-ranges-specifier = other-range-unit "=" other-range-set
other-range-set = 1*VCHAR
</pre>
</div>

<p>
A server MAY ignore the Range header field. However, origin servers and intermediate caches ought to support byte ranges when possible, since Range supports efficient recovery from partially failed transfers and partial retrieval of large representations. A server MUST ignore a Range header field received with a request method other than GET.
</p>

<p>
An origin server MUST ignore a Range header field that contains a range unit it does not understand. A proxy MAY discard a Range header field that contains a range unit it does not understand.
</p>

<p>
A server that supports range requests MAY ignore or reject a Range header field that consists of more than two overlapping ranges, or a set of many small ranges that are not listed in ascending order, since both are indications of either a broken client or a deliberate denial-of-service attack (Section 6.1). A client SHOULD NOT request multiple ranges that are inherently less efficient to process and transfer than a single range that encompasses the same data.
</p>

<p>
A client that is requesting multiple ranges SHOULD list those ranges in ascending order (the order in which they would typically be received in a complete representation) unless there is a specific need to request a later part earlier. For example, a user agent processing a large representation with an internal catalog of parts might need to request later parts first, particularly if the representation consists of pages stored in reverse order and the user agent wishes to transfer one page at a time.
</p>

<p>
The Range header field is evaluated after evaluating the precondition header fields defined in [RFC7232], and only if the result in absence of the Range header field would be a 200 (OK) response. In other words, Range is ignored when a conditional GET would result in a 304 (Not Modified) response.
</p>

<p>
The If-Range header field (Section 3.2) can be used as a precondition to applying the Range header field.
</p>

<p>
If all of the preconditions are true, the server supports the Range header field for the target resource, and the specified range(s) are valid and satisfiable (as defined in Section 2.1), the server SHOULD send a 206 (Partial Content) response with a payload containing one or more partial representations that correspond to the satisfiable ranges requested, as defined in Section 4.
</p>

<p>
If all of the preconditions are true, the server supports the Range header field for the target resource, and the specified range(s) are invalid or unsatisfiable, the server SHOULD send a 416 (Range Not Satisfiable) response.
</p>
</div>
</div>

<div id="outline-container-org79d4a85" class="outline-3">
<h3 id="org79d4a85"><a id="ID-2859ef1f-8309-4b7d-9e22-963391b5822a"></a>3.2. If-Range</h3>
<div class="outline-text-3" id="text-org79d4a85">
<p>
If a client has a partial copy of a representation and wishes to have an up-to-date copy of the entire representation, it could use the Range header field with a conditional GET (using either or both of If-Unmodified-Since and If-Match.) However, if the precondition fails because the representation has been modified, the client would then have to make a second request to obtain the entire current representation.
</p>

<p>
The "If-Range" header field allows a client to "short-circuit" the second request. Informally, its meaning is as follows: if the representation is unchanged, send me the part(s) that I am requesting in Range; otherwise, send me the entire representation.
</p>

<div class="org-src-container">
<pre class="src src-text">If-Range = entity-tag / HTTP-date
</pre>
</div>

<p>
A client MUST NOT generate an If-Range header field in a request that does not contain a Range header field. A server MUST ignore an If-Range header field received in a request that does not contain a Range header field. An origin server MUST ignore an If-Range header field received in a request for a target resource that does not support Range requests.
</p>

<p>
A client MUST NOT generate an If-Range header field containing an entity-tag that is marked as weak. A client MUST NOT generate an If-Range header field containing an HTTP-date unless the client has no entity-tag for the corresponding representation and the date is a strong validator in the sense defined by Section 2.2.2 of [RFC7232].
</p>

<p>
A server that evaluates an If-Range precondition MUST use the strong comparison function when comparing entity-tags (Section 2.3.2 of [RFC7232]) and MUST evaluate the condition as false if an HTTP-date validator is provided that is not a strong validator in the sense defined by Section 2.2.2 of [RFC7232]. A valid entity-tag can be distinguished from a valid HTTP-date by examining the first two characters for a DQUOTE.
</p>

<p>
If the validator given in the If-Range header field matches the current validator for the selected representation of the target resource, then the server SHOULD process the Range header field as requested. If the validator does not match, the server MUST ignore the Range header field. Note that this comparison by exact match, including when the validator is an HTTP-date, differs from the "earlier than or equal to" comparison used when evaluating an If-Unmodified-Since conditional.
</p>
</div>
</div>
</div>

<div id="outline-container-org3bb2822" class="outline-2">
<h2 id="org3bb2822"><a id="ID-028da72d-1e54-4bee-ac56-3d63169c6c3f"></a>4. Responses to a Range Request</h2>
<div class="outline-text-2" id="text-org3bb2822">
</div>
<div id="outline-container-org2d91892" class="outline-3">
<h3 id="org2d91892"><a id="ID-32182a4e-00f6-44d9-82e2-f08d98b59324"></a>4.1. 206 Partial Content</h3>
<div class="outline-text-3" id="text-org2d91892">
<p>
The 206 (Partial Content) status code indicates that the server is successfully fulfilling a range request for the target resource by transferring one or more parts of the selected representation that correspond to the satisfiable ranges found in the request's Range header field (Section 3.1).
</p>

<p>
If a single part is being transferred, the server generating the 206 response MUST generate a Content-Range header field, describing what range of the selected representation is enclosed, and a payload consisting of the range. For example:
</p>

<pre class="example">
HTTP/1.1 206 Partial Content
Date: Wed, 15 Nov 1995 06:25:24 GMT
Last-Modified: Wed, 15 Nov 1995 04:58:08 GMT
Content-Range: bytes 21010-47021/47022
Content-Length: 26012
Content-Type: image/gif

... 26012 bytes of partial image data ...
</pre>

<p>
If multiple parts are being transferred, the server generating the 206 response MUST generate a "multipart/byteranges" payload, as defined in Appendix A, and a Content-Type header field containing the multipart/byteranges media type and its required boundary parameter. To avoid confusion with single-part responses, a server MUST NOT generate a Content-Range header field in the HTTP header section of a multiple part response (this field will be sent in each part instead).
</p>

<p>
Within the header area of each body part in the multipart payload, the server MUST generate a Content-Range header field corresponding to the range being enclosed in that body part. If the selected representation would have had a Content-Type header field in a 200 (OK) response, the server SHOULD generate that same Content-Type field in the header area of each body part. For example:
</p>

<pre class="example">
HTTP/1.1 206 Partial Content
Date: Wed, 15 Nov 1995 06:25:24 GMT
Last-Modified: Wed, 15 Nov 1995 04:58:08 GMT
Content-Length: 1741
Content-Type: multipart/byteranges; boundary=THIS_STRING_SEPARATES

--THIS_STRING_SEPARATES
Content-Type: application/pdf
Content-Range: bytes 500-999/8000

...the first range...
--THIS_STRING_SEPARATES
Content-Type: application/pdf
Content-Range: bytes 7000-7999/8000

...the second range
--THIS_STRING_SEPARATES--
</pre>

<p>
When multiple ranges are requested, a server MAY coalesce any of the ranges that overlap, or that are separated by a gap that is smaller than the overhead of sending multiple parts, regardless of the order in which the corresponding byte-range-spec appeared in the received Range header field. Since the typical overhead between parts of a multipart/byteranges payload is around 80 bytes, depending on the selected representation's media type and the chosen boundary parameter length, it can be less efficient to transfer many small disjoint parts than it is to transfer the entire selected representation.
</p>

<p>
A server MUST NOT generate a multipart response to a request for a single range, since a client that does not request multiple parts might not support multipart responses. However, a server MAY generate a multipart/byteranges payload with only a single body part if multiple ranges were requested and only one range was found to be satisfiable or only one range remained after coalescing. A client that cannot process a multipart/byteranges response MUST NOT generate a request that asks for multiple ranges.
</p>

<p>
When a multipart response payload is generated, the server SHOULD send the parts in the same order that the corresponding byte-range-spec appeared in the received Range header field, excluding those ranges that were deemed unsatisfiable or that were coalesced into other ranges. A client that receives a multipart response MUST inspect the Content-Range header field present in each body part in order to determine which range is contained in that body part; a client cannot rely on receiving the same ranges that it requested, nor the same order that it requested.
</p>

<p>
When a 206 response is generated, the server MUST generate the following header fields, in addition to those required above, if the field would have been sent in a 200 (OK) response to the same request: Date, Cache-Control, ETag, Expires, Content-Location, and Vary.
</p>

<p>
If a 206 is generated in response to a request with an If-Range header field, the sender SHOULD NOT generate other representation header fields beyond those required above, because the client is understood to already have a prior response containing those header fields. Otherwise, the sender MUST generate all of the representation header fields that would have been sent in a 200 (OK) response to the same request.
</p>

<p>
A 206 response is cacheable by default; i.e., unless otherwise indicated by explicit cache controls (see Section 4.2.2 of [RFC7234]).
</p>
</div>
</div>

<div id="outline-container-org96d66d2" class="outline-3">
<h3 id="org96d66d2">4.2. Content-Range</h3>
<div class="outline-text-3" id="text-org96d66d2">
<p>
The "Content-Range" header field is sent in a single part 206 (Partial Content) response to indicate the partial range of the selected representation enclosed as the message payload, sent in each part of a multipart 206 response to indicate the range enclosed within each body part, and sent in 416 (Range Not Satisfiable) responses to provide information about the selected representation.
</p>

<div class="org-src-container">
<pre class="src src-text">Content-Range       = byte-content-range
                    / other-content-range

byte-content-range  = bytes-unit SP
                      ( byte-range-resp / unsatisfied-range )

byte-range-resp     = byte-range "/" ( complete-length / "*" )
byte-range          = first-byte-pos "-" last-byte-pos
unsatisfied-range   = "*/" complete-length

complete-length     = 1*DIGIT

other-content-range = other-range-unit SP other-range-resp
other-range-resp    = *CHAR
</pre>
</div>

<p>
If a 206 (Partial Content) response contains a Content-Range header field with a range unit (Section 2) that the recipient does not understand, the recipient MUST NOT attempt to recombine it with a stored representation. A proxy that receives such a message SHOULD forward it downstream.
</p>

<p>
For byte ranges, a sender SHOULD indicate the complete length of the representation from which the range has been extracted, unless the complete length is unknown or difficult to determine. An asterisk character ("*") in place of the complete-length indicates that the representation length was unknown when the header field was generated.
</p>

<p>
The following example illustrates when the complete length of the selected representation is known by the sender to be 1234 bytes:
</p>

<pre class="example">
Content-Range: bytes 42-1233/1234
</pre>

<p>
and this second example illustrates when the complete length is unknown:
</p>

<pre class="example">
Content-Range: bytes 42-1233/*
</pre>

<p>
A Content-Range field value is invalid if it contains a byte-range-resp that has a last-byte-pos value less than its first-byte-pos value, or a complete-length value less than or equal to its last-byte-pos value. The recipient of an invalid Content-Range MUST NOT attempt to recombine the received content with a stored representation.
</p>

<p>
A server generating a 416 (Range Not Satisfiable) response to a byte-range request SHOULD send a Content-Range header field with an unsatisfied-range value, as in the following example:
</p>

<pre class="example">
Content-Range: bytes */1234
</pre>

<p>
The complete-length in a 416 response indicates the current length of the selected representation.
</p>

<p>
The Content-Range header field has no meaning for status codes that do not explicitly describe its semantic. For this specification, only the 206 (Partial Content) and 416 (Range Not Satisfiable) status codes describe a meaning for Content-Range.
</p>

<p>
The following are examples of Content-Range values in which the selected representation contains a total of 1234 bytes:
</p>

<ul class="org-ul">
<li><p>
The first 500 bytes:
</p>

<pre class="example">
Content-Range: bytes 0-499/1234
</pre></li>

<li><p>
The second 500 bytes:
</p>

<pre class="example">
Content-Range: bytes 500-999/1234
</pre></li>

<li><p>
All except for the first 500 bytes:
</p>

<pre class="example">
Content-Range: bytes 500-1233/1234
</pre></li>

<li><p>
The last 500 bytes:
</p>

<pre class="example">
Content-Range: bytes 734-1233/1234
</pre></li>
</ul>
</div>
</div>


<div id="outline-container-orgbffe853" class="outline-3">
<h3 id="orgbffe853">4.3. Combining Ranges</h3>
<div class="outline-text-3" id="text-orgbffe853">
<p>
A response might transfer only a subrange of a representation if the connection closed prematurely or if the request used one or more Range specifications. After several such transfers, a client might have received several ranges of the same representation. These ranges can only be safely combined if they all have in common the same strong validator (Section 2.1 of [RFC7232]).
</p>

<p>
A client that has received multiple partial responses to GET requests on a target resource MAY combine those responses into a larger continuous range if they share the same strong validator.
</p>

<p>
If the most recent response is an incomplete 200 (OK) response, then the header fields of that response are used for any combined response and replace those of the matching stored responses.
</p>

<p>
If the most recent response is a 206 (Partial Content) response and at least one of the matching stored responses is a 200 (OK), then the combined response header fields consist of the most recent 200 response's header fields. If all of the matching stored responses are 206 responses, then the stored response with the most recent header fields is used as the source of header fields for the combined response, except that the client MUST use other header fields provided in the new response, aside from Content-Range, to replace all instances of the corresponding header fields in the stored response.
</p>

<p>
The combined response message body consists of the union of partial content ranges in the new response and each of the selected responses. If the union consists of the entire range of the representation, then the client MUST process the combined response as if it were a complete 200 (OK) response, including a Content-Length header field that reflects the complete length. Otherwise, the client MUST process the set of continuous ranges as one of the following: an incomplete 200 (OK) response if the combined response is a prefix of the representation, a single 206 (Partial Content) response containing a multipart/byteranges body, or multiple 206 (Partial Content) responses, each with one continuous range that is indicated by a Content-Range header field.
</p>
</div>
</div>

<div id="outline-container-org9a26c49" class="outline-3">
<h3 id="org9a26c49"><a id="ID-a2f29dcf-8c15-4b15-ab66-742f476d27f3"></a>4.4. 416 Range Not Satisfiable</h3>
<div class="outline-text-3" id="text-org9a26c49">
<p>
The 416 (Range Not Satisfiable) status code indicates that none of the ranges in the request's Range header field (Section 3.1) overlap the current extent of the selected resource or that the set of ranges requested has been rejected due to invalid ranges or an excessive request of small or overlapping ranges.
</p>

<p>
For byte ranges, failing to overlap the current extent means that the first-byte-pos of all of the byte-range-spec values were greater than the current length of the selected representation. When this status code is generated in response to a byte-range request, the sender SHOULD generate a Content-Range header field specifying the current length of the selected representation (Section 4.2).
</p>

<p>
For example:
</p>

<pre class="example">
HTTP/1.1 416 Range Not Satisfiable
Date: Fri, 20 Jan 2012 15:41:54 GMT
Content-Range: bytes */47022
</pre>

<p>
<b>Note:</b> Because servers are free to ignore Range, many implementations will simply respond with the entire selected representation in a 200 (OK) response. That is partly because most clients are prepared to receive a 200 (OK) to complete the task (albeit less efficiently) and partly because clients might not stop making an invalid partial request until they have received a complete representation. Thus, clients cannot depend on receiving a 416 (Range Not Satisfiable) response even when it is most appropriate.
</p>
</div>
</div>
</div>

<div id="outline-container-orga5fdf53" class="outline-2">
<h2 id="orga5fdf53">5. IANA Considerations</h2>
<div class="outline-text-2" id="text-orga5fdf53">
</div>
<div id="outline-container-org4c965e1" class="outline-3">
<h3 id="org4c965e1">5.1. Range Unit Registry</h3>
<div class="outline-text-3" id="text-org4c965e1">
<p>
The "HTTP Range Unit Registry" defines the namespace for the range unit names and refers to their corresponding specifications. The registry has been created and is now maintained at <a href="http://www.iana.org/assignments/http-parameters">http://www.iana.org/assignments/http-parameters</a>.
</p>
</div>

<div id="outline-container-orgd9e592f" class="outline-4">
<h4 id="orgd9e592f">5.1.1. Procedure</h4>
<div class="outline-text-4" id="text-orgd9e592f">
<p>
Registration of an HTTP Range Unit MUST include the following fields:
</p>

<ul class="org-ul">
<li>Name</li>
<li>Description</li>
<li>Pointer to specification text</li>
</ul>

<p>
Values to be added to this namespace require IETF Review (see [RFC5226], Section 4.1).
</p>
</div>
</div>

<div id="outline-container-orgc516e6b" class="outline-4">
<h4 id="orgc516e6b">5.1.2. Registrations</h4>
<div class="outline-text-4" id="text-orgc516e6b">
<p>
The initial range unit registry contains the registrations below:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Range Unit Name</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">bytes</td>
<td class="org-left">a range of octets</td>
<td class="org-left">Section 2.1</td>
</tr>

<tr>
<td class="org-left">none</td>
<td class="org-left">reserved as keyword, indicating no ranges are supported</td>
<td class="org-left">Section 2.3</td>
</tr>
</tbody>
</table>

<p>
The change controller is: "IETF (iesg@ietf.org) - Internet Engineering Task Force".
</p>
</div>
</div>
</div>

<div id="outline-container-orge3c1e57" class="outline-3">
<h3 id="orge3c1e57">5.2. Status Code Registration</h3>
<div class="outline-text-3" id="text-orge3c1e57">
<p>
The "Hypertext Transfer Protocol (HTTP) Status Code Registry" located at <a href="http://www.iana.org/assignments/http-status-codes">http://www.iana.org/assignments/http-status-codes</a> has been updated to include the registrations below:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Value</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">206</td>
<td class="org-left">Partial Control</td>
<td class="org-left">Section 4.1</td>
</tr>

<tr>
<td class="org-right">416</td>
<td class="org-left">Range Not Satisfiable</td>
<td class="org-left">Section 4.4</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org750fe0c" class="outline-3">
<h3 id="org750fe0c">5.3. Header Field Registration</h3>
<div class="outline-text-3" id="text-org750fe0c">
<p>
HTTP header fields are registered within the "Message Headers" registry maintained at <a href="http://www.iana.org/assignments/message-headers/">http://www.iana.org/assignments/message-headers/</a>.
</p>

<p>
This document defines the following HTTP header fields, so their associated registry entries have been updated according to the permanent registrations below (see [BCP90]):
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Header Field name</th>
<th scope="col" class="org-left">Protocol</th>
<th scope="col" class="org-left">Status</th>
<th scope="col" class="org-left">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Accept-Ranges</td>
<td class="org-left">http</td>
<td class="org-left">standard</td>
<td class="org-left">Section 2.3</td>
</tr>

<tr>
<td class="org-left">Content-Range</td>
<td class="org-left">http</td>
<td class="org-left">standard</td>
<td class="org-left">Section 4.2</td>
</tr>

<tr>
<td class="org-left">If-Range</td>
<td class="org-left">http</td>
<td class="org-left">standard</td>
<td class="org-left">Section 3.2</td>
</tr>

<tr>
<td class="org-left">Range</td>
<td class="org-left">http</td>
<td class="org-left">standard</td>
<td class="org-left">Section 3.1</td>
</tr>
</tbody>
</table>

<p>
The change controller is: "IETF (iesg@ietf.org) - Internet Engineering Task Force".
</p>
</div>
</div>

<div id="outline-container-orgad4c2a6" class="outline-3">
<h3 id="orgad4c2a6">5.4. Internet Media Type Registration</h3>
<div class="outline-text-3" id="text-orgad4c2a6">
<p>
IANA maintains the registry of Internet media types [BCP13] at <a href="http://www.iana.org/assignments/media-types">http://www.iana.org/assignments/media-types</a>.
</p>

<p>
This document serves as the specification for the Internet media type "multipart/byteranges". The following has been registered with IANA.
</p>
</div>

<div id="outline-container-org5f297a0" class="outline-4">
<h4 id="org5f297a0">5.4.1. Internet Media Type multipart/byteranges</h4>
<div class="outline-text-4" id="text-org5f297a0">
<pre class="example">
Type name: multipart
Subtype name: byteranges
Required parameters: boundary
Optional parameters: N/A
Encoding considerations: only "7bit", "8bit", or "binary" are permitted
Security considerations: see Section 6
Interoperability considerations: N/A
Published specification: This specification (see Appendix A).
Applications that use this media type: HTTP components supporting multiple ranges in a single request.
Fragment identifier considerations: N/A
Additional information: 
  Deprecated alias names for this type: N/A
  Magic number(s): N/A
  File extension(s): N/A
  Macintosh file type code(s): N/A
Person and email address to contact for further information: See Authors' Addresses section.
Intended usage: COMMON
Restrictions on usage: N/A
Author: See Authors' Addresses section.
Change controller: IESG
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org07a40e2" class="outline-2">
<h2 id="org07a40e2">6. Security Considerations</h2>
<div class="outline-text-2" id="text-org07a40e2">
<p>
This section is meant to inform developers, information providers, and users of known security concerns specific to the HTTP range request mechanisms. More general security considerations are addressed in HTTP messaging [RFC7230] and semantics [RFC7231].
</p>
</div>

<div id="outline-container-org4e7ae40" class="outline-3">
<h3 id="org4e7ae40">6.1. Denial-of-Service Attacks Using Range</h3>
<div class="outline-text-3" id="text-org4e7ae40">
<p>
Unconstrained multiple range requests are susceptible to denial-of-service attacks because the effort required to request many overlapping ranges of the same data is tiny compared to the time, memory, and bandwidth consumed by attempting to serve the requested data in many parts. Servers ought to ignore, coalesce, or reject egregious range requests, such as requests for more than two overlapping ranges or for many small ranges in a single set, particularly when the ranges are requested out of order for no apparent reason. Multipart range requests are not designed to support random access.
</p>
</div>
</div>
</div>

<div id="outline-container-org0a72d12" class="outline-2">
<h2 id="org0a72d12">7. Acknowledgments</h2>
<div class="outline-text-2" id="text-org0a72d12">
<p>
See Section 10 of [RFC7230].
</p>
</div>
</div>

<div id="outline-container-orgbeb3402" class="outline-2">
<h2 id="orgbeb3402">8. References</h2>
<div class="outline-text-2" id="text-orgbeb3402">
</div>
<div id="outline-container-orgc0979c4" class="outline-3">
<h3 id="orgc0979c4">8.1. Normative References</h3>
<div class="outline-text-3" id="text-orgc0979c4">
<dl class="org-dl">
<dt>[RFC2046]</dt><dd>Freed, N. and N. Borenstein, “Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types”, RFC 2046, November 1996.</dd>
<dt>[RFC2119]</dt><dd>Bradner, S., “Key words for use in RFCs to Indicate Requirement Levels”, BCP 14, RFC 2119, March 1997.</dd>
<dt>[RFC5234]</dt><dd>Crocker, D., Ed. and P. Overell, “Augmented BNF for Syntax Specifications: ABNF”, STD 68, RFC 5234, January 2008.</dd>
<dt>[RFC7230]</dt><dd>Fielding, R., Ed. and J. Reschke, Ed., “Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing”, RFC 7230, June 2014.</dd>
<dt>[RFC7231]</dt><dd>Fielding, R., Ed. and J. Reschke, Ed., “Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content”, RFC 7231, June 2014.</dd>
<dt>[RFC7232]</dt><dd>Fielding, R., Ed. and J. Reschke, Ed., “Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests”, RFC 7232, June 2014.</dd>
<dt>[RFC7234]</dt><dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “Hypertext Transfer Protocol (HTTP/1.1): Caching”, RFC 7234, June 2014.</dd>
</dl>
</div>
</div>

<div id="outline-container-org199c976" class="outline-3">
<h3 id="org199c976">8.2. Informative References</h3>
<div class="outline-text-3" id="text-org199c976">
<dl class="org-dl">
<dt>[BCP13]</dt><dd>Freed, N., Klensin, J., and T. Hansen, “Media Type Specifications and Registration Procedures”, BCP 13, RFC 6838, January 2013.</dd>
<dt>[BCP90]</dt><dd>Klyne, G., Nottingham, M., and J. Mogul, “Registration Procedures for Message Header Fields”, BCP 90, RFC 3864, September 2004.</dd>
<dt>[RFC2616]</dt><dd>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, “Hypertext Transfer Protocol &#x2013; HTTP/1.1”, RFC 2616, June 1999.</dd>
<dt>[RFC5226]</dt><dd>Narten, T. and H. Alvestrand, “Guidelines for Writing an IANA Considerations Section in RFCs”, BCP 26, RFC 5226, May 2008.</dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-org3530ef3" class="outline-2">
<h2 id="org3530ef3"><a id="ID-d0f2a428-d1ab-49fd-9ac2-531946ecac25"></a>Appendix A. Internet Media Type multipart/byteranges</h2>
<div class="outline-text-2" id="text-org3530ef3">
<p>
When a 206 (Partial Content) response message includes the content of multiple ranges, they are transmitted as body parts in a multipart message body ([RFC2046], Section 5.1) with the media type of "multipart/byteranges".
</p>

<p>
The multipart/byteranges media type includes one or more body parts, each with its own Content-Type and Content-Range fields. The required boundary parameter specifies the boundary string used to separate each body part.
</p>

<p>
Implementation Notes:
</p>

<ol class="org-ol">
<li>Additional CRLFs might precede the first boundary string in the body.</li>
<li>Although [RFC2046] permits the boundary string to be quoted, some existing implementations handle a quoted boundary string incorrectly.</li>
<li>A number of clients and servers were coded to an early draft of the byteranges specification that used a media type of multipart/x-byteranges, which is almost (but not quite) compatible with this type.</li>
</ol>

<p>
Despite the name, the "multipart/byteranges" media type is not limited to byte ranges. The following example uses an "exampleunit" range unit:
</p>

<pre class="example">
HTTP/1.1 206 Partial Content
Date: Tue, 14 Nov 1995 06:25:24 GMT
Last-Modified: Tue, 14 July 04:58:08 GMT
Content-Length: 2331785
Content-Type: multipart/byteranges; boundary=THIS_STRING_SEPARATES

--THIS_STRING_SEPARATES
Content-Type: video/example
Content-Range: exampleunit 1.2-4.3/25

...the first range...
--THIS_STRING_SEPARATES
Content-Type: video/example
Content-Range: exampleunit 11.2-14.3/25

...the second range
--THIS_STRING_SEPARATES--
</pre>
</div>
</div>

<div id="outline-container-org0d1b044" class="outline-2">
<h2 id="org0d1b044">Appendix B. Changes from RFC 2616</h2>
<div class="outline-text-2" id="text-org0d1b044">
<p>
Servers are given more leeway in how they respond to a range request, in order to mitigate abuse by malicious (or just greedy) clients. (Section 3.1)
</p>

<p>
A weak validator cannot be used in a 206 response. (Section 4.1)
</p>

<p>
The Content-Range header field only has meaning when the status code explicitly defines its use. (Section 4.2)
</p>

<p>
This specification introduces a Range Unit Registry. (Section 5.1)
</p>

<p>
multipart/byteranges can consist of a single part. (Appendix A)
</p>
</div>
</div>

<div id="outline-container-orgacb9ec2" class="outline-2">
<h2 id="orgacb9ec2">Appendix C. Imported ABNF</h2>
<div class="outline-text-2" id="text-orgacb9ec2">
<p>
The following core rules are included by reference, as defined in Appendix B.1 of [RFC5234]: ALPHA (letters), CR (carriage return), CRLF (CR LF), CTL (controls), DIGIT (decimal 0-9), DQUOTE (double quote), HEXDIG (hexadecimal 0-9/A-F/a-f), LF (line feed), OCTET (any 8-bit sequence of data), SP (space), and VCHAR (any visible US-ASCII character).
</p>

<p>
Note that all rules derived from token are to be compared case-insensitively, like range-unit and acceptable-ranges.
</p>

<p>
The rules below are defined in [RFC7230]:
</p>

<div class="org-src-container">
<pre class="src src-text">OWS        = &lt;OWS, see [RFC7230], Section 3.2.3&gt;
token      = &lt;token, see [RFC7230], Section 3.2.6&gt;
</pre>
</div>

<p>
The rules below are defined in other parts:
</p>

<div class="org-src-container">
<pre class="src src-text">HTTP-date  = &lt;HTTP-date, see [RFC7231], Section 7.1.1.1&gt;
entity-tag = &lt;entity-tag, see [RFC7232], Section 2.3&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org5d79cab" class="outline-2">
<h2 id="org5d79cab">Appendix D. Collected ABNF</h2>
<div class="outline-text-2" id="text-org5d79cab">
<p>
In the collected ABNF below, list rules are expanded as per Section 1.2 of [RFC7230].
</p>

<div class="org-src-container">
<pre class="src src-text">Accept-Ranges = acceptable-ranges

Content-Range = byte-content-range / other-content-range

HTTP-date = &lt;HTTP-date, see [RFC7231], Section 7.1.1.1&gt;

If-Range = entity-tag / HTTP-date

OWS = &lt;OWS, see [RFC7230], Section 3.2.3&gt;

Range = byte-ranges-specifier / other-ranges-specifier

acceptable-ranges = ( *( "," OWS ) range-unit *( OWS "," [ OWS
 range-unit ] ) ) / "none"

byte-content-range = bytes-unit SP ( byte-range-resp /
 unsatisfied-range )
byte-range = first-byte-pos "-" last-byte-pos
byte-range-resp = byte-range "/" ( complete-length / "*" )
byte-range-set = *( "," OWS ) ( byte-range-spec /
 suffix-byte-range-spec ) *( OWS "," [ OWS ( byte-range-spec /
 suffix-byte-range-spec ) ] )
byte-range-spec = first-byte-pos "-" [ last-byte-pos ]
byte-ranges-specifier = bytes-unit "=" byte-range-set
bytes-unit = "bytes"

complete-length = 1*DIGIT

entity-tag = &lt;entity-tag, see [RFC7232], Section 2.3&gt;

first-byte-pos = 1*DIGIT

last-byte-pos = 1*DIGIT

other-content-range = other-range-unit SP other-range-resp
other-range-resp = *CHAR
other-range-set = 1*VCHAR
other-range-unit = token
other-ranges-specifier = other-range-unit "=" other-range-set

range-unit = bytes-unit / other-range-unit

suffix-byte-range-spec = "-" suffix-length
suffix-length = 1*DIGIT

token = &lt;token, see [RFC7230], Section 3.2.6&gt;

unsatisfied-range = "*/" complete-length
</pre>
</div>
</div>
</div>

<div id="outline-container-org020c35c" class="outline-2">
<h2 id="org020c35c">Index</h2>
</div>

<div id="outline-container-org212efb0" class="outline-2">
<h2 id="org212efb0">Authors' Addresses</h2>
<div class="outline-text-2" id="text-org212efb0">
<pre class="example">
Roy T. Fielding (editor)
Adobe Systems Incorporated
345 Park Ave
San Jose, CA 95110
USA
Email: fielding@gbiv.com
URI: http://roy.gbiv.com/
</pre>

<pre class="example">
Yves Lafon (editor)
World Wide Web Consortium
W3C / ERCIM
2004, rte des Lucioles
Sophia-Antipolis, AM 06902
France
Email: ylafon@w3.org
URI: http://www.raubacapeu.net/people/yves/
</pre>

<pre class="example">
Julian F. Reschke (editor)
greenbytes GmbH
Hafenweg 16
Muenster, NW 48155
Germany
Email: julian.reschke@greenbytes.de
URI: http://greenbytes.de/tech/webdav/
</pre>
</div>
</div>
</div>
</body>
</html>
