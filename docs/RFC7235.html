<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-07-08 Mon 15:40 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RFC7235: Hypertext Transfer Protocol (HTTP/1.1): Authentication</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
* {
  box-sizing: border-box;
}

html {
  padding: 0;
}

body {
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  font-size: 15px;
  line-height: 1.6;
  padding: 0;
  margin: 0;
  color: #24292e;
  word-wrap: break-word;
}

b, strong {
  font-weight: 700;
}

p {
  margin: 0 0 16px;
}

a {
  color: #0366d6;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

a:active, a:hover {
  outline-width: 0;
}

.underline{
  text-decoration: underline;
}

del{
  text-decoration: line-through;
}

i {
  font-style: italic;
}

ul, ol {
  padding-left: 1em;
}

ruby {
  border-bottom: 1px solid #d9d9d9;
}

ruby > rt {
  color: #6a737d;
  text-align: center;
}

h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25;
}

h1.title {
  padding-bottom: 0.3em;
  font-size: 2em;
  border-bottom: 1px solid #eaecef;
}

.outline-2 h1 {
  font-size: 2.5em;
}

.outline-2 h2 {
  padding-bottom: 0.3em;
  font-size: 2em;
  border-bottom: 1px solid #eaecef;
}

.outline-2 h3 {
  padding-bottom: 0.3em;
  font-size: 1.5em;
  border-bottom: 1px solid #eaecef;
}

.outline-2 h4 {
  font-size: 1.25em
}

.outline-2 h5 {
  font-size: 1.1em
}

.outline-2 h6 {
  font-size: 1.1em
}

.outline-2 code {
  padding: 0.2em 0.4em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(27,31,35,0.05);
  border-radius: 3px;

  color: #c7254e;
  background-color: #f9f2f4;
  white-space: normal;
  font-family: Consolas,Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,sans-serif;
}

.outline-2 table{
  width: 100%;
}

.org-ul,
.org-ol,
.org-dl,
.org-dl > dt,
.org-dl > dd,
.outline-2 p,
.outline-2 blockquote,
.outline-2 table,
.outline-2 pre {
  margin-top: 0;
  margin-bottom: 16px;
}

.org-ul,
.org-ol,
.org-dl {
  padding-left: 2em;
}

.org-dl > dt {
  float: left;
  max-width: 40%;
  margin-bottom: 3px;
  margin-right: 2em;
  font-size: 110%;
  font-family: Courier New;
  font-weight: bolder;
  color: #1c3030;
  clear: left;
}

.org-dl > dd {
  text-align: justify;
  margin-bottom: 14pt;
  overflow: hidden;
  clear: right;
}

table tbody tr:nth-child(odd){
  background-color: #efefef;
}

.org-center {
  text-align: center;
}

.org-left {
  text-align: left;
}

.org-right {
  text-align: right;
}

img {
  border: 1px solid #ddd;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

pre,
blockquote {
  margin-bottom: 1em;
}

pre {
  margin: 0;
  padding: 1em;
  line-height: 1.45;
  font-size: 95%;
  font-family: Consolas,Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,sans-serif;
  border-radius: 3px;
  overflow: auto;
}

blockquote {
  padding: 0 1em;
  color: #6a737d;
  border-left: 0.25em solid #dfe2e5;
  margin: 0;
}

.org-src-container, .example {
  width: 100%;
  overflow-x: auto;
  border-left: 0.25em solid #dfe2e5;
  border-radius: 0.5rem;
  background-color: #f6f8fa;
  margin-bottom: 16px;
}

.org-src-container pre {
  margin-bottom: 0;
}

.timestamp {
  font-family: Courier New;
  color: #888888;
}

#table-of-contents {
  font-size: 9pt;
  position: fixed;
  right: 0em;
  top: 0em;
  background: white;
  -webkit-box-shadow: 0 0 1em #777777;
  -moz-box-shadow: 0 0 1em #777777;
  -webkit-border-bottom-left-radius: 5px;
  -moz-border-radius-bottomleft: 5px;
  text-align: right;
  max-height: 80%;
  overflow: auto;
  z-index: 200;
}

#table-of-contents h2 {
  font-size: 14px;
  font-weight: normal;
  padding: 0 .5em;
  margin: 16px 0;
  text-align: left;
}

#table-of-contents ul {
  margin-left: 14pt;
  margin-bottom: 10pt;
  padding: 0
}

#table-of-contents li {
  padding: 0;
  margin: 1px;
  list-style: none;
}

#table-of-contents ul>:first-child {
  color: blue;
}

#table-of-contents #text-table-of-contents {
  display: none;
  text-align: left;
}

#table-of-contents:hover #text-table-of-contents {
  display: block;
  padding: 0.5em;
  margin-top: -1.5em;
}

#content {
  width: 980px;
  padding: 45px 15px 15px 15px;
  margin-right: auto;
  margin-left: auto;
}

@media screen and (max-width: 980px) {
  #content {
    width: 100%;
  }
  #table-of-contents {
    float: right;
    border: 1px solid #CCC;
    max-width: 75%;
    overflow: auto;
  }
  .org-dl > dt {
    float: none;
  }
}

.footdef {
}
.footdef sup {
  float: left;
  width: 3em;
}
.footdef > .footpara {
  margin-left: 3em;
  overflow-x: hidden;
}
.org-src-container {
  width: 100%;
  overflow-x: auto;
}
.github-repo {
  position: absolute;
  top: 0;
  left: -24px;
  margin-top: 32px;
  padding: 0 20px 0 40px;
  background-color: rgba(0,0,0,.2);
  height: 22px;
  line-height: 22px;
  padding-left: 42px;
  transform: rotate(-45deg);
  transform-origin: 40% 50%;
}
.github-repo:hover,
.github-repo:active {
  text-decoration: none;
}
.github-repo svg {
  position: absolute;
  width: 18px;
  height: 18px;
  left: 20px;
  top: 2px;
}
.github-repo span {
  color: #fff;
}
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">RFC7235: Hypertext Transfer Protocol (HTTP/1.1): Authentication</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc48f5f7">摘要 / Abstract</a></li>
<li><a href="#org0bd7803">备忘状态 / Status of This Memo</a></li>
<li><a href="#orgb9ee303">Copyright Notice</a></li>
<li><a href="#org0b30b70">1. 引言 / Introduction</a>
<ul>
<li><a href="#orgb3fce96">1.1. 一致性和错误处理 / Conformance and Error Handling</a></li>
<li><a href="#orgd1879ca">1.2. 句法标记 / Syntax Notation</a></li>
</ul>
</li>
<li><a href="#orgd266e6f">2. 访问身份验证框架 / Access Authentication Framework</a>
<ul>
<li><a href="#orgc624cd6">2.1. 质询和作答 / Challenge and Response</a></li>
<li><a href="#org080522a">2.2. 保护空间（领域） / Protection Space (Realm)</a></li>
</ul>
</li>
<li><a href="#org1986578">3. 状态码定义 / Status Code Definitions</a>
<ul>
<li><a href="#orgea53663">3.1. 401 Unauthorized</a></li>
<li><a href="#org0638ce0">3.2. 407 Proxy Authentication Required</a></li>
</ul>
</li>
<li><a href="#orgd1611ca">4. 头字段定义 / Header Field Definitions</a>
<ul>
<li><a href="#orgfa32f4b">4.1. WWW-Authenticate</a></li>
<li><a href="#org83ecc17">4.2. Authorization</a></li>
<li><a href="#org440e962">4.3. Proxy-Authenticate</a></li>
<li><a href="#org18ce3e0">4.4. Proxy-Authorization</a></li>
</ul>
</li>
<li><a href="#org6acf1bf">5. IANA 注意事项 / IANA Considerations</a>
<ul>
<li><a href="#orgedcd1d9">5.1. 身份验证方案登记表 / Authentication Scheme Registry</a>
<ul>
<li><a href="#org2e368a3">5.1.1. 手续 / Procedure</a></li>
<li><a href="#orgff3113e">5.1.2. 新的身份验证方案的注意事项 / Considerations for New Authentication Schemes</a></li>
</ul>
</li>
<li><a href="#orgea27146">5.2. 状态码登记表 / Status Code Registration</a></li>
<li><a href="#orgb3ce7fc">5.3. 头字段登记表 / Header Field Registration</a></li>
</ul>
</li>
<li><a href="#org14b4942">6. 安全注意事项 / Security Considerations</a>
<ul>
<li><a href="#orgb74e19f">6.1. 证书凭证的保密性 / Confidentiality of Credentials</a></li>
<li><a href="#org069b25f">6.2. 身份验证证书凭证和空闲客户端 / Authentication Credentials and Idle Clients</a></li>
<li><a href="#org282f653">6.3. 保护空间 / Protection Spaces</a></li>
</ul>
</li>
<li><a href="#orgaabb94b">7. 鸣谢 / Acknowledgments</a></li>
<li><a href="#orgadc8467">8. 参考资料 / References</a>
<ul>
<li><a href="#org3b0c3db">8.1. 规范性参考资料 / Normative References</a></li>
<li><a href="#org5a54f2f">8.2. 信息性参考资料 / Informative References</a></li>
</ul>
</li>
<li><a href="#org1994bab">附录 A：相对 RFC 2616 和 2617 的变化 / Appendix A. Changes from RFCs 2616 and 2617</a></li>
<li><a href="#org48a9208">附录 B：引进的 ABNF / Appendix B. Imported ABNF</a></li>
<li><a href="#orgacfc244">附录 C：ABNF 集合 / Appendix C. Collected ABNF</a></li>
<li><a href="#org9358a53">索引 / Index</a></li>
<li><a href="#org6c1e403">Authors' Addresses</a></li>
</ul>
</div>
</div>
<a class="github-repo" href="https://github.com/duoani/HTTP-RFCs.zh-cn">
  <svg height="18" width="18" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
  <span>View Repo</span>
</a>

<a href="https://github.com/duoani/HTTP-RFCs.zh-cn">
  <img alt="" src="https://img.shields.io/github/license/duoani/HTTP-RFCs.zh-cn.svg?style=social"/>
</a>
<a href="https://github.com/duoani/HTTP-RFCs.zh-cn">
  <img src="https://img.shields.io/github/stars/duoani/HTTP-RFCs.zh-cn.svg?style=social&label=Stars"/>
</a>

<div class="org-src-container">
<pre class="src src-text">                                                       PROPOSED STANDARD

Internet Engineering Task Force (IETF)                  R. Fielding, Ed.
Request for Comments: 7235                                         Adobe
Obsoletes: 2616                                          J. Reschke, Ed.
Updates: 2617                                                 greenbytes
Category: Standards Track                                      June 2014
ISSN: 2070-1721
</pre>
</div>

<div id="outline-container-orgc48f5f7" class="outline-2">
<h2 id="orgc48f5f7">摘要 / Abstract</h2>
<div class="outline-text-2" id="text-orgc48f5f7">
<blockquote>
<p>
The Hypertext Transfer Protocol (HTTP) is a stateless application-level protocol for distributed, collaborative, hypermedia information systems. This document defines the HTTP Authentication framework.
</p>
</blockquote>

<p>
超文本传输协议（HTTP）是一种<ruby>无状态<rt>stateless</rt></ruby>的应用层协议，适用于分布式、协作式的超文本信息系统。本文档定义了 HTTP 的<ruby>身份验证框架<rt>Authentication framework</rt></ruby>。
</p>
</div>
</div>

<div id="outline-container-org0bd7803" class="outline-2">
<h2 id="org0bd7803">备忘状态 / Status of This Memo</h2>
<div class="outline-text-2" id="text-org0bd7803">
<blockquote>
<p>
This is an Internet Standards Track document.
</p>
</blockquote>

<p>
这是一个 Internet Standards Track 文档。
</p>

<blockquote>
<p>
This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in Section 2 of RFC 5741.
</p>
</blockquote>

<p>
本文档是<ruby>互联网工程任务组<rt>Internet Engineering Task Force</rt></ruby>（IETF）的产品。它代表了 IETF 社区的共识。它已经接受公众审核并且已经被<ruby>互联网工程指导组<rt>Internet Engineering Steering Group</rt></ruby>（IESG）批准发布。有关<ruby>互联网标准<rt>Internet Standards</rt></ruby>的更多信息，请参阅 RFC 5741 <a href="https://tools.ietf.org/html/rfc5741">章节 2</a>。
</p>

<blockquote>
<p>
Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at <a href="http://www.rfc-editor.org/info/rfc7235">http://www.rfc-editor.org/info/rfc7235</a>.
</p>
</blockquote>

<p>
关于本文档的当前状态，任何勘误以及如何提供反馈的信息可以从 <a href="http://www.rfc-editor.org/info/rfc7235">http://www.rfc-editor.org/info/rfc7235</a> 获得。
</p>
</div>
</div>

<div id="outline-container-orgb9ee303" class="outline-2">
<h2 id="orgb9ee303">Copyright Notice</h2>
<div class="outline-text-2" id="text-orgb9ee303">
<blockquote>
<p>
Copyright © 2014 IETF Trust and the persons identified as the document authors. All rights reserved.
</p>
</blockquote>

<blockquote>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.
</p>
</blockquote>

<blockquote>
<p>
This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008. The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-org0b30b70" class="outline-2">
<h2 id="org0b30b70">1. 引言 / Introduction</h2>
<div class="outline-text-2" id="text-org0b30b70">
<blockquote>
<p>
HTTP provides a general framework for access control and authentication, via an extensible set of challenge-response authentication schemes, which can be used by a server to challenge a client request and by a client to provide authentication information. This document defines HTTP/1.1 authentication in terms of the architecture defined in "Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing" [<a href="RFC7230.html">RFC7230</a>], including the general framework previously described in "HTTP Authentication: Basic and Digest Access Authentication" [<a href="https://tools.ietf.org/html/rfc2617">RFC2617</a>] and the related fields and status codes previously defined in "Hypertext Transfer Protocol &#x2013; HTTP/1.1" [<a href="https://tools.ietf.org/html/rfc2616">RFC2616</a>].
</p>
</blockquote>

<p>
HTTP 提供了一个通用的访问控制和身份验证框架，经由一个可扩展的<ruby>质询-作答<rt>challenge-response</rt></ruby>身份验证方案的集合，服务器可以使用这种身份验证方案对客户端的请求进行质询，而客户端可以使用这种谁方案来向服务器提供身份验证信息。本文档依据《超文本传输协议（HTTP/1.1）：消息与路由》【<a href="RFC7230.html">RFC7230</a>】所定义的架构来定义了 HTTP/1.1 的身份验证，包括：之前在《HTTP 身份验证：基础与数字访问身份验证》【<a href="https://tools.ietf.org/html/rfc2617">RFC2617</a>】有所描述的通用框架，以及之前在《超文本传输协议——HTTP/1.1》【<a href="https://tools.ietf.org/html/rfc2616">RFC2616</a>】所定义的相关的字段和状态码。
</p>

<blockquote>
<p>
The IANA Authentication Scheme Registry (<a href="#orgedcd1d9">Section 5.1</a>) lists registered authentication schemes and their corresponding specifications, including the "basic" and "digest" authentication schemes previously defined by RFC 2617.
</p>
</blockquote>

<p>
IANA 身份验证方案登记表（<a href="#orgedcd1d9">章节 5.1</a>）列出了已登记的身份验证方案及其对应的规范，包括之前由 RFC 2617 所定义的 "basic" 和 "digest" 身份验证方案。
</p>
</div>

<div id="outline-container-orgb3fce96" class="outline-3">
<h3 id="orgb3fce96">1.1. 一致性和错误处理 / Conformance and Error Handling</h3>
<div class="outline-text-3" id="text-orgb3fce96">
<blockquote>
<p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in [<a href="https://tools.ietf.org/html/rfc2119">RFC2119</a>].
</p>
</blockquote>

<p>
本文档中的关键词 <b><ruby>必须<rt>MUST</rt></ruby></b>、<b><ruby>禁止<rt>MUST NOT</rt></ruby></b>、<b><ruby>要求<rt>REQUIRED</rt></ruby></b>、<b><ruby>必须<rt>SHALL</rt></ruby></b>、<b><ruby>禁止<rt>SHALL NOT</rt></ruby></b>、<b><ruby>应当<rt>SHOULD</rt></ruby></b>、<b><ruby>不应当<rt>SHOULD NOT</rt></ruby></b>、<b><ruby>推荐<rt>RECOMMENDED</rt></ruby></b>、<b><ruby>可以<rt>MAY</rt></ruby></b> 和 <b><ruby>可选<rt>OPTIONAL</rt></ruby></b> 的意义与【<a href="https://tools.ietf.org/html/rfc2119">RFC2119</a>】一致。
</p>

<blockquote>
<p>
Conformance criteria and considerations regarding error handling are defined in <a href="RFC7230.html#ID-A0441F72-9799-4667-9477-1E05885946A1">Section 2.5</a> of [RFC7230].
</p>
</blockquote>

<p>
关于错误处理的一致性标准以及注意事项已在<a href="RFC7230.html#ID-A0441F72-9799-4667-9477-1E05885946A1">【RFC7230】章节 2.5</a> 中定义了。
</p>
</div>
</div>

<div id="outline-container-orgd1879ca" class="outline-3">
<h3 id="orgd1879ca">1.2. 句法标记 / Syntax Notation</h3>
<div class="outline-text-3" id="text-orgd1879ca">
<blockquote>
<p>
This specification uses the Augmented Backus-Naur Form (ABNF) notation of [RFC5234] with a list extension, defined in Section 7 of [RFC7230], that allows for compact definition of comma-separated lists using a '#' operator (similar to how the '*' operator indicates repetition). Appendix B describes rules imported from other documents. Appendix C shows the collected grammar with all list operators expanded to standard ABNF notation.
</p>
</blockquote>

<p>
本规范使用了<ruby>扩展巴科斯范式<rt>Augmented Backus-Naur Form</rt></ruby>（ABNF）标记法【<a href="https://tools.ietf.org/html/rfc5234">RFC5234</a>】，另外，出于定义的紧凑性的考虑，本规范对 ABNF 规则进行了扩展（见<a href="RFC7230.html#ID-b9db011d-fe47-4781-929a-4b1b0aa55aec">章节 7</a>），允许使用一个 <code>#</code> 操作符（类似于 <code>*</code> 操作符，指代“重复”）来定义一种以逗号分隔的列表。<a href="RFC7234.html#ID-dd632d27-1596-43fe-90f8-dba848353e12">附录 B</a> 描述了从其他文档中引进的规则。<a href="RFC7234.html#ID-33ccb99a-6b09-4750-9e71-4cc1e43b49c5">附录 C</a> 展示了所有已收集的包含列表扩展规则以及标准 ABNF 标记的语法。
</p>
</div>
</div>
</div>

<div id="outline-container-orgd266e6f" class="outline-2">
<h2 id="orgd266e6f"><a id="ID-64839e69-dd3b-4f66-b97b-61b3e23d6818"></a>2. 访问身份验证框架 / Access Authentication Framework</h2>
<div class="outline-text-2" id="text-orgd266e6f">
</div>
<div id="outline-container-orgc624cd6" class="outline-3">
<h3 id="orgc624cd6">2.1. 质询和作答 / Challenge and Response</h3>
<div class="outline-text-3" id="text-orgc624cd6">
<blockquote>
<p>
HTTP provides a simple challenge-response authentication framework that can be used by a server to challenge a client request and by a client to provide authentication information. It uses a case-insensitive token as a means to identify the authentication scheme, followed by additional information necessary for achieving authentication via that scheme. The latter can be either a comma-separated list of parameters or a single sequence of characters capable of holding base64-encoded information.
</p>
</blockquote>

<p>
HTTP 提供了一种简单的<ruby>质询-作答<rt>challenge-response</rt></ruby>身份验证框架，服务器可以使用它来对客户端请求进行质询，而客户端可以使用它来提供身份验证信息。它使用一个不区分大小写的<ruby>标记<rt>token</rt></ruby>来作为一种标识<ruby>身份验证方案<rt>authentication scheme</rt></ruby>的方法，这个标记之后紧跟的是通过这种方案来获取身份验证所必要的额外信息。这些额外信息要么是一个以逗号分隔的参数列表，要么是一个可以持有 base64 编码信息的字符序列。
</p>

<blockquote>
<p>
译注：质询-作答，就好比一个答题游戏，主持提问参赛者一个问题，参赛者答对了就可以进入下一个环节，如果答错了就挑战失败了。又好比一个开门暗号，暗号由房间内的人设置，门外的人需要回答这个暗号。也有人将其译为“挑战-响应”。
</p>
</blockquote>

<blockquote>
<p>
Authentication parameters are <code>name=value</code> pairs, where the <code>name</code> token is matched case-insensitively, and each parameter name <b>MUST</b> only occur once per challenge.
</p>
</blockquote>

<p>
身份验证参数是 <code>name=value</code> 键值对，其中 <code>name</code> 标记是按不区分大小写的方式来匹配的，并且在每一次质询当中，每个参数名称 <b>必须</b> 仅出现一次。
</p>

<div class="org-src-container">
<pre class="src src-text">auth-scheme    = token

auth-param     = token BWS "=" BWS ( token / quoted-string )

token68        = 1*( ALPHA / DIGIT /
                     "-" / "." / "_" / "~" / "+" / "/" ) *"=" 
</pre>
</div>

<blockquote>
<p>
The <code>token68</code> syntax allows the 66 unreserved URI characters ([<a href="https://tools.ietf.org/html/rfc3986#section-2.3">RFC3986</a>]), plus a few others, so that it can hold a base64, base64url (URL and filename safe alphabet), base32, or base16 (hex) encoding, with or without padding, but excluding whitespace ([<a href="https://tools.ietf.org/html/rfc4648">RFC4648</a>]).
</p>
</blockquote>

<p>
<code>token68</code> 句法允许【<a href="https://tools.ietf.org/html/rfc3986#section-2.3">RFC3986</a>】所规定的 66 个未保留的 URI 字符，再加上一些其他的字符，以便它能够持有一个 base64、base64url（URL 和文件名安全的字母）、base32、或者 base16 (hex) 编码，带有或者不带有<ruby>填充字符<rt>padding</rt></ruby>，但是排除<ruby>空白<rt>whitespace</rt></ruby>（【<a href="https://tools.ietf.org/html/rfc4648">RFC4648</a>】）。
</p>

<blockquote>
<p>
译注：【RFC3986】中规定的未保留字符共有以下这些：
unreserved  = ALPHA / DIGIT / "-" / "." / "_" / "~"
</p>
</blockquote>

<blockquote>
<p>
译注：base64 与 base32 编码方案一般使用等号 "=" 作为填充字符。
</p>
</blockquote>

<blockquote>
<p>
A <code>401 (Unauthorized)</code> response message is used by an origin server to challenge the authorization of a user agent, including a <code>WWW-Authenticate</code> header field containing at least one challenge applicable to the requested resource.
</p>
</blockquote>

<p>
源服务器使用一个 <code>401 (Unauthorized)</code> 响应消息来向用户代理质询身份验证，其中带有一个 <code>WWW-Authenticate</code> 头字段包含至少一个适用于所要请求的资源的质询。
</p>

<blockquote>
<p>
A <code>407 (Proxy Authentication Required)</code> response message is used by a proxy to challenge the authorization of a client, including a <code>Proxy-Authenticate</code> header field containing at least one challenge applicable to the proxy for the requested resource.
</p>
</blockquote>

<p>
代理使用一个 <code>407 (Proxy Authentication Required)</code> 响应消息来向客户端质询身份验证，其中带有一个 <code>Proxy-Authenticate</code> 头字段包含至少一个适用于代理去请求资源的质询。
</p>

<div class="org-src-container">
<pre class="src src-text">challenge   = auth-scheme [ 1*SP ( token68 / #auth-param ) ]
</pre>
</div>

<blockquote>
<p>
<b>Note:</b> Many clients fail to parse a challenge that contains an unknown scheme. A workaround for this problem is to list well-supported schemes (such as "basic") first.
</p>
</blockquote>

<p>
<b>注意：</b> 许多客户端无法解析包含一种未知方案的质询。对于这种问题的一种变通方法是先列出良好支持的方案（比如 "basic"）。
</p>

<blockquote>
<p>
A user agent that wishes to authenticate itself with an origin server — usually, but not necessarily, after receiving a <code>401 (Unauthorized)</code> — can do so by including an <code>Authorization</code> header field with the request.
</p>
</blockquote>

<p>
在接收到一个 <code>401 (Unauthorized)</code> 以后，如果用户代理希望通过源服务器来证明自身身份（通常但并非必然），可以通过在请求中带有一个 <code>Authentication</code> 头字段来达到。
</p>

<blockquote>
<p>
A client that wishes to authenticate itself with a proxy — usually, but not necessarily, after receiving a <code>407 (Proxy Authentication Required)</code> — can do so by including a <code>Proxy-Authorization</code> header field with the request.
</p>
</blockquote>

<p>
在接收到一个 <code>407 (Proxy Authentication Required)</code> 以后，如果用户代理希望通过代理来证明自身身份（通常但并非必然），可以通过在请求中带有一个 <code>Proxy-Authorization</code> 头字段来达到。
</p>

<blockquote>
<p>
Both the <code>Authorization</code> field value and the <code>Proxy-Authorization</code> field value contain the client's credentials for the realm of the resource being requested, based upon a challenge received in a response (possibly at some point in the past). When creating their values, the user agent ought to do so by selecting the challenge with what it considers to be the most secure <code>auth-scheme</code> that it understands, obtaining credentials from the user as appropriate. Transmission of credentials within header field values implies significant security considerations regarding the confidentiality of the underlying connection, as described in <a href="#orgb74e19f">Section 6.1</a>.
</p>
</blockquote>

<p>
<code>Authentication</code> 的字段值和 <code>Proxy-Authorization</code> 字段值都包含有客户端对所要请求的资源领域的凭证，根据（可能在过去的某个时候）接收自一个响应里的一个质询。当创建它们的值的时候，用户代理应该选择其理解的并认为是最安全的那一种 <code>auth-scheme</code> 质询，从用户那里适当地获得凭证。在头字段值里传输凭证意味着底层连接机密性方面的重大安全注意事项，正如<a href="#orgb74e19f">章节 6.1</a> 所描述的。
</p>

<div class="org-src-container">
<pre class="src src-text">credentials = auth-scheme [ 1*SP ( token68 / #auth-param ) ]
</pre>
</div>

<blockquote>
<p>
Upon receipt of a request for a protected resource that omits credentials, contains invalid credentials (e.g., a bad password) or partial credentials (e.g., when the authentication scheme requires more than one round trip), an origin server <b>SHOULD</b> send a <code>401 (Unauthorized)</code> response that contains a <code>WWW-Authenticate</code> header field with at least one (possibly new) challenge applicable to the requested resource.
</p>
</blockquote>

<p>
如果源服务器接收到一个访问保护资源的请求，一旦这个请求缺少凭证，或者包含有一个无效的凭证（比如，一个错误的密码），或者不完整的凭证（比如，当身份验证方案要求超过一个以上回合的时候），那么，源服务器 <b>应当</b> 发送一个 <code>401 (Unauthorized)</code> 响应，其内包含有一个 <code>WWW-Authenticate</code> 头字段，该字段至少带有一个（可能是新的）适用于所请求的资源的质询。
</p>

<blockquote>
<p>
Likewise, upon receipt of a request that omits proxy credentials or contains invalid or partial proxy credentials, a proxy that requires authentication <b>SHOULD</b> generate a <code>407 (Proxy Authentication Required)</code> response that contains a <code>Proxy-Authenticate</code> header field with at least one (possibly new) challenge applicable to the proxy.
</p>
</blockquote>

<p>
同样，如果代理接收到一个请求，一旦这个请求缺少代理凭证，或者包含有无效或不完整的代理凭证，那么，要求身份验证的代理 <b>应当</b> 生成一个 <code>407 (Proxy Authentication Required)</code> 响应，其内包含有一个 <code>Proxy-Authenticate</code> 头字段，该字段至少带有一个（可能是新的）适用该代理的质询。
</p>

<blockquote>
<p>
A server that receives valid credentials that are not adequate to gain access ought to respond with the <code>403 (Forbidden)</code> status code (<a href="RFC7231.html#ID-addb601c-6b2f-45a7-97f7-9d24bdb8b585">Section 6.5.3</a> of [RFC7231]).
</p>
</blockquote>

<p>
服务器接收到有效凭证但并不足以授权其访问资源时，应该回应一个带有 <code>403 (Forbidden)</code> 状态码的响应（<a href="RFC7231.html#ID-addb601c-6b2f-45a7-97f7-9d24bdb8b585">【RFC7231】章节 6.5.3</a>）。
</p>

<blockquote>
<p>
HTTP does not restrict applications to this simple challenge-response framework for access authentication. Additional mechanisms can be used, such as authentication at the transport level or via message encapsulation, and with additional header fields specifying authentication information. However, such additional mechanisms are not defined by this specification.
</p>
</blockquote>

<p>
HTTP 并没有将对这个简单的<ruby>质询-作答<rt>challenge-response</rt></ruby>框架上的应用限定为访问身份验证。可以使用其他额外的机制（比如在传输层上的身份验证，或者经由消息封装的身份验证），以及带有额外头字段所指定的身份验证信息。然而，本规范并没有定义这些额外的机制。
</p>
</div>
</div>

<div id="outline-container-org080522a" class="outline-3">
<h3 id="org080522a"><a id="ID-3f8b1d00-3d63-48e3-9be3-bd0251515d12"></a>2.2. 保护空间（领域） / Protection Space (Realm)</h3>
<div class="outline-text-3" id="text-org080522a">
<blockquote>
<p>
The "<code>realm</code>" authentication parameter is reserved for use by authentication schemes that wish to indicate a scope of protection.
</p>
</blockquote>

<p>
<code>realm</code> 是一个保留的身份验证参数，某些<ruby>身份验证方案<rt>authentication schemes</rt></ruby>如果希望去表明保护范围的话，可以使用它来实现目的。
</p>

<blockquote>
<p>
A protection space is defined by the canonical root URI (the <code>scheme</code> and <code>authority</code> components of the effective request URI; see <a href="RFC7230.html#ID-3265c21d-0d3b-4776-8e28-38278d168779">Section 5.5</a> of [RFC7230]) of the server being accessed, in combination with the <code>realm</code> value if present. These realms allow the protected resources on a server to be partitioned into a set of protection spaces, each with its own authentication scheme and/or authorization database. The <code>realm</code> value is a string, generally assigned by the origin server, that can have additional semantics specific to the authentication scheme. Note that a response can have multiple challenges with the same <code>auth-scheme</code> but with different realms.
</p>
</blockquote>

<p>
<ruby>保护空间<rt>protection space</rt></ruby>是由被访问的服务器的<ruby>规范化根 URI<rt>canonical root URI</rt></ruby>（即实际请求 URI 的 <code>scheme</code> 和 <code>authority</code> 组件，见<a href="RFC7230.html#ID-3265c21d-0d3b-4776-8e28-38278d168779">【RFC7230】章节 5.5</a>），并结合 <code>realm</code> 的值（如果有出现的话）来进行定义的。这些<ruby>领域<rt>realms</rt></ruby>使得在服务器上要保护的各种资源可以划分为一系列的<ruby>保护空间<rt>protection spaces</rt></ruby>，每一个保护空间都有自己的身份验证方案以及/或者身份验证数据库。<code>realm</code> 的值是一个字符串，通常由源服务器所赋值，可以具有对应身份验证方案所特有的额外语义。需要注意的是，一个响应可以有多个具有相同 <code>auth-scheme</code> 但不同 <code>realm</code> 的质询。
</p>

<blockquote>
<p>
The protection space determines the domain over which credentials can be automatically applied. If a prior request has been authorized, the user agent <b>MAY</b> reuse the same credentials for all other requests within that protection space for a period of time determined by the authentication scheme, parameters, and/or user preferences (such as a configurable inactivity timeout). Unless specifically allowed by the authentication scheme, a single protection space cannot extend outside the scope of its server.
</p>
</blockquote>

<p>
保护空间决定了哪一种凭证可以被自动执行。某个之前的请求假如已经经过授权，那么，对于这个保护空间内的所有其他请求，用户代理 <b>可以</b> 在一段时间内复用同一个凭证，而这个具体时间为多久，取决于<ruby>身份验证方案<rt>authentication scheme</rt></ruby>、参数，以及/或者用户的偏好设置（比如一个可配置的闲置超时时间）。除非身份验证方案明确允许，单个保护空间的范围不能超出它的服务器的范围。
</p>

<blockquote>
<p>
For historical reasons, a sender <b>MUST</b> only generate the <code>quoted-string</code> syntax. Recipients might have to support both <code>token</code> and <code>quoted-string</code> syntax for maximum interoperability with existing clients that have been accepting both notations for a long time.
</p>
</blockquote>

<p>
出于历史遗留的原因，发送端 <b>必须</b> 仅生成 <code>quoted-string</code> 句法。而为了最大化与现存的很早就接受两种标记法的客户端的可交互性，接收端可能得同时支持 <code>token</code> 和 <code>quoted-string</code> 两种句法。
</p>
</div>
</div>
</div>

<div id="outline-container-org1986578" class="outline-2">
<h2 id="org1986578"><a id="ID-3a079a03-d926-4f70-95da-d8fcedbdf3ac"></a>3. 状态码定义 / Status Code Definitions</h2>
<div class="outline-text-2" id="text-org1986578">
</div>
<div id="outline-container-orgea53663" class="outline-3">
<h3 id="orgea53663"><a id="ID-50ef5918-69e6-4826-9f20-db56fdd02974"></a>3.1. 401 Unauthorized</h3>
<div class="outline-text-3" id="text-orgea53663">
<blockquote>
<p>
The <code>401 (Unauthorized)</code> status code indicates that the request has not been applied because it lacks valid authentication credentials for the target resource. The server generating a <code>401</code> response <b>MUST</b> send a <code>WWW-Authenticate</code> header field (<a href="#orgfa32f4b">Section 4.1</a>) containing at least one challenge applicable to the target resource.
</p>
</blockquote>

<p>
<code>401 (Unauthorized)</code> 状态码表明：请求未被执行，因为它缺少目标资源的有效身份验证凭证。服务器在生成一个 <code>401</code> 响应的时候，<b>必须</b> 发送一个 <code>WWW-Authenticate</code> 头字段（<a href="#orgfa32f4b">章节 4.1</a>），其包含至少一个适用于该目标资源的<ruby>质询<rt>challenge</rt></ruby>。
</p>

<blockquote>
<p>
If the request included authentication credentials, then the <code>401</code> response indicates that authorization has been refused for those credentials. The user agent <b>MAY</b> repeat the request with a new or replaced <code>Authorization</code> header field (<a href="#org83ecc17">Section 4.2</a>). If the <code>401</code> response contains the same challenge as the prior response, and the user agent has already attempted authentication at least once, then the user agent <b>SHOULD</b> present the enclosed representation to the user, since it usually contains relevant diagnostic information.
</p>
</blockquote>

<p>
如果该请求带有身份验证凭证（一个或多个），那么，这个 <code>401</code> 响应表明服务器拒绝授权给这些凭证。用户代理 <b>可以</b> 重新发起这个请求，带有一个新的或者替换过的 <code>Authorization</code> 头字段（<a href="#org83ecc17">章节 4.2</a>）。重新发起请求之后，如果仍然返回的是 <code>401</code> 响应，且响应带有与之前的 <code>401</code> 响应相同的质询，而且用户代理已经试过至少一次身份验证了，那么，用户代理 <b>应当</b> 将响应内的表示形式展示给用户，因为这种响应通常包含有相关的诊断信息。
</p>
</div>
</div>

<div id="outline-container-org0638ce0" class="outline-3">
<h3 id="org0638ce0"><a id="ID-1029b0aa-9c78-463a-b3f4-a4acbfbac26f"></a>3.2. 407 Proxy Authentication Required</h3>
<div class="outline-text-3" id="text-org0638ce0">
<blockquote>
<p>
The <code>407 (Proxy Authentication Required)</code> status code is similar to <code>401 (Unauthorized)</code>, but it indicates that the client needs to authenticate itself in order to use a proxy. The proxy <b>MUST</b> send a <code>Proxy-Authenticate</code> header field (<a href="#org440e962">Section 4.3</a>) containing a challenge applicable to that proxy for the target resource. The client <b>MAY</b> repeat the request with a new or replaced <code>Proxy-Authorization</code> header field (<a href="#org18ce3e0">Section 4.4</a>).
</p>
</blockquote>

<p>
<code>407 (Proxy Authentication Required)</code> 状态码类似于 <code>401 (Unauthorized)</code>，但它表明：为了使用代理，客户端需要证明自身身份。代理 <b>必须</b> 发送一个 <code>Proxy-Authenticate</code> 头字段（<a href="#org440e962">章节 4.3</a>），其包含至少一个适用于代理去请求资源的质询。客户端 <b>可以</b> 重新发起这个请求，带有一个新的或者替换过的 <code>Proxy-Authorization</code> 头字段（<a href="#org18ce3e0">章节 4.4</a>）。
</p>
</div>
</div>
</div>

<div id="outline-container-orgd1611ca" class="outline-2">
<h2 id="orgd1611ca">4. 头字段定义 / Header Field Definitions</h2>
<div class="outline-text-2" id="text-orgd1611ca">
<blockquote>
<p>
This section defines the syntax and semantics of header fields related to the HTTP authentication framework.
</p>
</blockquote>

<p>
本章节定义了 HTTP 身份验证框架相关的头字段的句法和语义。
</p>
</div>

<div id="outline-container-orgfa32f4b" class="outline-3">
<h3 id="orgfa32f4b"><a id="ID-22f79cd1-20cc-4ac0-bd68-643e0d51fe7d"></a>4.1. WWW-Authenticate</h3>
<div class="outline-text-3" id="text-orgfa32f4b">
<blockquote>
<p>
The "<code>WWW-Authenticate</code>" header field indicates the authentication scheme(s) and parameters applicable to the target resource.
</p>
</blockquote>

<p>
<code>WWW-Authenticate</code> 头字段指出了适用于目标资源的（一个或多个）身份验证方案及其参数。
</p>

<div class="org-src-container">
<pre class="src src-text">WWW-Authenticate = 1#challenge
</pre>
</div>

<blockquote>
<p>
A server generating a <code>401 (Unauthorized)</code> response <b>MUST</b> send a <code>WWW-Authenticate</code> header field containing at least one challenge. A server <b>MAY</b> generate a <code>WWW-Authenticate</code> header field in other response messages to indicate that supplying credentials (or different credentials) might affect the response.
</p>
</blockquote>

<p>
服务器在生成一个 <code>401 (Unauthorized)</code> 响应的时候，<b>必须</b> 发送一个 <code>WWW-Authenticate</code> 头字段，其包含至少一个质询。服务器 <b>可以</b> 在其他响应消息中生成一个 <code>WWW-Authenticate</code> 头字段来表明：提供凭证（或者不同的凭证）可能会响应到这个响应。
</p>

<blockquote>
<p>
A proxy forwarding a response <b>MUST NOT</b> modify any <code>WWW-Authenticate</code> fields in that response.
</p>
</blockquote>

<p>
代理在转发一个响应的时候，<b>禁止</b> 修改响应里的任何 <code>WWW-Authenticate</code> 字段。
</p>

<blockquote>
<p>
User agents are advised to take special care in parsing the field value, as it might contain more than one challenge, and each challenge can contain a comma-separated list of authentication parameters. Furthermore, the header field itself can occur multiple times.
</p>
</blockquote>

<p>
建议用户代理在解析这个头字段值的时候要特别小心，因为它可能包含有超过一个以上的质询，并且每一个质询都能够包含有一个<ruby>以逗号分隔<rt>comma-separated</rt></ruby>的身份验证参数列表。此外，这个头字段自身还能够在消息中出现多次。
</p>

<blockquote>
<p>
For instance:
</p>
</blockquote>

<p>
例如：
</p>

<pre class="example">
WWW-Authenticate: Newauth realm="apps", type=1,
                  title="Login to \"apps\"", Basic realm="simple"
</pre>

<blockquote>
<p>
This header field contains two challenges; one for the "Newauth" scheme with a realm value of "apps", and two additional parameters "type" and "title", and another one for the "Basic" scheme with a realm value of "simple".
</p>
</blockquote>

<p>
这个头字段包含有两个质询：一个是 "Newauth" 方案，它的领域 <code>realm</code> 为 "apps"，还有两个额外的参数 "type" 和 "title"；另一个是 "Basic" 方案，它的领域 <code>realm</code> 是 "simple"。
</p>

<blockquote>
<p>
<b>Note:</b> The challenge grammar production uses the list syntax as well. Therefore, a sequence of comma, whitespace, and comma can be considered either as applying to the preceding challenge, or to be an empty entry in the list of challenges. In practice, this ambiguity does not affect the semantics of the header field value and thus is harmless.
</p>
</blockquote>

<p>
<b>注意：</b> 质询的语法规则中还使用了列表句法。因此，号号序列、空白、以及逗号可被视为要么执行之前的质询，要么是质询列表中的一个空的条目。实践过程中，这种歧义并不会影响到这个头字段值的语义，因此它是无害的。
</p>
</div>
</div>

<div id="outline-container-org83ecc17" class="outline-3">
<h3 id="org83ecc17"><a id="ID-14671c8e-e5a4-4f9d-ad1d-6460328ed7f5"></a>4.2. Authorization</h3>
<div class="outline-text-3" id="text-org83ecc17">
<blockquote>
<p>
The "<code>Authorization</code>" header field allows a user agent to authenticate itself with an origin server — usually, but not necessarily, after receiving a <code>401 (Unauthorized)</code> response. Its value consists of credentials containing the authentication information of the user agent for the realm of the resource being requested.
</p>
</blockquote>

<p>
<code>Authorization</code> 头字段让用户代理可以在（通常但并非必然）接收到一个 <code>401 (Unauthorized)</code> 响应以后，向源服务器证明自身身份。它的值由<ruby>凭证<rt>credentials</rt></ruby>组成，这些凭证包含有对于被请求资源所在的<ruby>领域<rt>realm</rt></ruby>的用户代理身份验证信息。
</p>

<div class="org-src-container">
<pre class="src src-text">Authorization = credentials
</pre>
</div>

<blockquote>
<p>
If a request is authenticated and a realm specified, the same credentials are presumed to be valid for all other requests within this realm (assuming that the authentication scheme itself does not require otherwise, such as credentials that vary according to a challenge value or using synchronized clocks).
</p>
</blockquote>

<p>
如果一个请求已经经过身份验证并指定了一个<ruby>领域<rt>realm</rt></ruby>，那么同一个凭证可假定为有效于在这个领域中的所有其他请求（假设该身份验证方案自身并没有要求其他，比如凭证的值依赖质询的值或者同步时钟的变化而变化）。
</p>

<blockquote>
<p>
A proxy forwarding a request <b>MUST NOT</b> modify any <code>Authorization</code> fields in that request. See <a href="RFC7234.html#ID-d6b247ad-fe70-4ddf-9bd3-ebc35ea6ac99">Section 3.2</a> of [RFC7234] for details of and requirements pertaining to handling of the <code>Authorization</code> field by HTTP caches.
</p>
</blockquote>

<p>
代理在转发一个请求的时候 <b>禁止</b> 修改这个请求里的任何 <code>Authorization</code> 字段。关于 HTTP 缓存如何处理 <code>Authorization</code> 字段的相关细节和要求，见<a href="RFC7234.html#ID-d6b247ad-fe70-4ddf-9bd3-ebc35ea6ac99">【RFC7234】章节 3.2</a>。
</p>
</div>
</div>

<div id="outline-container-org440e962" class="outline-3">
<h3 id="org440e962"><a id="ID-7f949af1-00e3-4909-adc7-219da68f0457"></a>4.3. Proxy-Authenticate</h3>
<div class="outline-text-3" id="text-org440e962">
<blockquote>
<p>
The "<code>Proxy-Authenticate</code>" header field consists of at least one challenge that indicates the authentication scheme(s) and parameters applicable to the proxy for this effective request URI (<a href="RFC7230.html#ID-3265c21d-0d3b-4776-8e28-38278d168779">Section 5.5</a> of [RFC7230]). A proxy <b>MUST</b> send at least one <code>Proxy-Authenticate</code> header field in each <code>407 (Proxy Authentication Required)</code> response that it generates.
</p>
</blockquote>

<p>
<code>Proxy-Authenticate</code> 头字段由至少一个质询组成，这些质询表明这个实际请求 URI（<a href="RFC7230.html#ID-3265c21d-0d3b-4776-8e28-38278d168779">【RFC7230】章节 5.5</a>）的代理所适用的身份验证方案及其参数。代理 <b>必须</b> 在它所生成的每一个 <code>407 (Proxy Authentication)</code> 响应中发送至少一个 <code>Proxy-Authenticate</code> 头字段。
</p>

<div class="org-src-container">
<pre class="src src-text">Proxy-Authenticate = 1#challenge
</pre>
</div>

<blockquote>
<p>
Unlike <code>WWW-Authenticate</code>, the <code>Proxy-Authenticate</code> header field applies only to the next outbound client on the response chain. This is because only the client that chose a given proxy is likely to have the credentials necessary for authentication. However, when multiple proxies are used within the same administrative domain, such as office and regional caching proxies within a large corporate network, it is common for credentials to be generated by the user agent and passed through the hierarchy until consumed. Hence, in such a configuration, it will appear as if <code>Proxy-Authenticate</code> is being forwarded because each proxy will send the same challenge set.
</p>
</blockquote>

<p>
不同于 <code>WWW-Authenticate</code>，<code>Proxy-Authenticate</code> 头字段只适用于响应链路中的下一个<ruby>出站客户端<rt>outbound client</rt></ruby>。那是因为只有选择某个给定代理的那个客户才有可能有身份验证所必要的凭证。但是，当在同一个管理域内使用了多个代理的话，比如在一个大的企业网络内的办公室或区域性缓存代理，常常会见到用户代理生成凭证并将它在层次结构中传递直到它被使用。因此，在这种配置中，它看起来就像 <code>Proxy-Authenticate</code> 被转发了，因为每个代理将会发送同一个质询集合。
</p>

<blockquote>
<p>
Note that the parsing considerations for <code>WWW-Authenticate</code> apply to this header field as well; see <a href="#orgfa32f4b">Section 4.1</a> for details.
</p>
</blockquote>

<p>
需要注意的是，<code>WWW-Authenticate</code> 相关的<ruby>解析注意事项<rt>parsing considerations</rt></ruby>同样也适用于本头字段，详细信息见<a href="#orgfa32f4b">章节 4.1</a>。
</p>
</div>
</div>

<div id="outline-container-org18ce3e0" class="outline-3">
<h3 id="org18ce3e0"><a id="ID-89c3125a-e7ef-48ea-a2c1-ff4c57214389"></a>4.4. Proxy-Authorization</h3>
<div class="outline-text-3" id="text-org18ce3e0">
<blockquote>
<p>
The "<code>Proxy-Authorization</code>" header field allows the client to identify itself (or its user) to a proxy that requires authentication. Its value consists of credentials containing the authentication information of the client for the proxy and/or realm of the resource being requested.
</p>
</blockquote>

<p>
<code>Proxy-Authorization</code> 头字段让客户可以向要求身份验证的代理验证自身（或它的用户）。它的值由凭证组成，每个凭证包含有客户端的身份验证信息，以及/或者被请求资源的<ruby>领域<rt>realm</rt></ruby>。
</p>

<div class="org-src-container">
<pre class="src src-text">Proxy-Authorization = credentials
</pre>
</div>

<blockquote>
<p>
Unlike <code>Authorization</code>, the <code>Proxy-Authorization</code> header field applies only to the next inbound proxy that demanded authentication using the <code>Proxy-Authenticate</code> field. When multiple proxies are used in a chain, the <code>Proxy-Authorization</code> header field is consumed by the first inbound proxy that was expecting to receive credentials. A proxy <b>MAY</b> relay the credentials from the client request to the next proxy if that is the mechanism by which the proxies cooperatively authenticate a given request.
</p>
</blockquote>

<p>
不同于 <code>Authorization</code>，<code>Proxy-Authorization</code> 头字段只适用于响应链路中的下一个入站代理（其使用 <code>Proxy-Authenticate</code> 字段来要求身份验证）。当在一个链路中使用了多个代理，<code>Proxy-Authorization</code> 头字段由第一个期望接收凭证的入站代理所使用。代理 <b>可以</b> 将客户端请求里的凭证<ruby>中转<rt>relay</rt></ruby>到下一个代理中，如果这是这些代理的合作验证一个给定的请求的机制的话。
</p>
</div>
</div>
</div>

<div id="outline-container-org6acf1bf" class="outline-2">
<h2 id="org6acf1bf">5. IANA 注意事项 / IANA Considerations</h2>
<div class="outline-text-2" id="text-org6acf1bf">
</div>
<div id="outline-container-orgedcd1d9" class="outline-3">
<h3 id="orgedcd1d9"><a id="ID-af1963ff-7886-492d-93cd-3d76aaf2d475"></a>5.1. 身份验证方案登记表 / Authentication Scheme Registry</h3>
<div class="outline-text-3" id="text-orgedcd1d9">
<blockquote>
<p>
The "Hypertext Transfer Protocol (HTTP) Authentication Scheme Registry" defines the namespace for the authentication schemes in challenges and credentials. It has been created and is now maintained at <a href="http://www.iana.org/assignments/http-authschemes">http://www.iana.org/assignments/http-authschemes</a>.
</p>
</blockquote>

<p>
《HTTP 身份验证方案登记表》定义了质询和凭证方面的身份验证方案的命名空间，这份登记表已经创建，目前维护在 <a href="http://www.iana.org/assignments/http-authschemes">http://www.iana.org/assignments/http-authschemes</a>。
</p>
</div>

<div id="outline-container-org2e368a3" class="outline-4">
<h4 id="org2e368a3">5.1.1. 手续 / Procedure</h4>
<div class="outline-text-4" id="text-org2e368a3">
<blockquote>
<p>
Registrations <b>MUST</b> include the following fields:
</p>

<ul class="org-ul">
<li>Authentication Scheme Name</li>
<li>Pointer to specification text</li>
<li>Notes (optional)</li>
</ul>
</blockquote>

<p>
登记条目 <b>必须</b> 包括以下字段：
</p>

<ul class="org-ul">
<li>身份验证方案的名称</li>
<li>指向到规范文本的引用</li>
<li>备注（可选）</li>
</ul>

<blockquote>
<p>
Values to be added to this namespace require IETF Review (see [RFC5226], <a href="https://tools.ietf.org/html/rfc5226#section-4.1">Section 4.1</a>).
</p>
</blockquote>

<p>
添加到 HTTP 状态码命名空间的值要求由 IETF 复审（见<a href="https://tools.ietf.org/html/rfc5226#section-4.1">【RFC5226】章节 4.1</a>）。
</p>
</div>
</div>

<div id="outline-container-orgff3113e" class="outline-4">
<h4 id="orgff3113e">5.1.2. 新的身份验证方案的注意事项 / Considerations for New Authentication Schemes</h4>
<div class="outline-text-4" id="text-orgff3113e">
<blockquote>
<p>
There are certain aspects of the HTTP Authentication Framework that put constraints on how new authentication schemes can work:
</p>

<ul class="org-ul">
<li>HTTP authentication is presumed to be stateless: all of the information necessary to authenticate a request <b>MUST</b> be provided in the request, rather than be dependent on the server remembering prior requests. Authentication based on, or bound to, the underlying connection is outside the scope of this specification and inherently flawed unless steps are taken to ensure that the connection cannot be used by any party other than the authenticated user (see <a href="RFC7230.html#ID-e2d9bed8-d6ca-4b5d-ab4a-6b2b2576393e">Section 2.3</a> of [RFC7230]).</li>

<li>The authentication parameter "realm" is reserved for defining protection spaces as described in <a href="#org080522a">Section 2.2</a>. New schemes <b>MUST NOT</b> use it in a way incompatible with that definition.</li>

<li>The "token68" notation was introduced for compatibility with existing authentication schemes and can only be used once per challenge or credential. Thus, new schemes ought to use the <code>auth-param</code> syntax instead, because otherwise future extensions will be impossible.</li>

<li><p>
The parsing of challenges and credentials is defined by this specification and cannot be modified by new authentication schemes. When the <code>auth-param</code> syntax is used, all parameters ought to support both <code>token</code> and <code>quoted-string</code> syntax, and syntactical constraints ought to be defined on the field value after parsing (i.e., <code>quoted-string</code> processing). This is necessary so that recipients can use a generic parser that applies to all authentication schemes.
</p>

<p>
<b>Note:</b> The fact that the value syntax for the "realm" parameter is restricted to <code>quoted-string</code> was a bad design choice not to be repeated for new parameters.
</p></li>

<li>Definitions of new schemes ought to define the treatment of unknown extension parameters. In general, a "must-ignore" rule is preferable to a "must-understand" rule, because otherwise it will be hard to introduce new parameters in the presence of legacy recipients. Furthermore, it's good to describe the policy for defining new parameters (such as "update the specification" or "use this registry").</li>

<li>Authentication schemes need to document whether they are usable in origin-server authentication (i.e., using <code>WWW-Authenticate</code>), and/or proxy authentication (i.e., using <code>Proxy-Authenticate</code>).</li>

<li><p>
The credentials carried in an <code>Authorization</code> header field are specific to the user agent and, therefore, have the same effect on HTTP caches as the "private" <code>Cache-Control</code> response directive (Section 5.2.2.6 of [RFC7234]), within the scope of the request in which they appear.
</p>

<p>
Therefore, new authentication schemes that choose not to carry credentials in the <code>Authorization</code> header field (e.g., using a newly defined header field) will need to explicitly disallow caching, by mandating the use of either <code>Cache-Control</code> request directives (e.g., "no-store", <a href="RFC7234.html#ID-0b69ee34-0121-454f-a6b3-1d0ddacb3cba">Section 5.2.1.5</a> of [RFC7234]) or response directives (e.g., "private").
</p></li>
</ul>
</blockquote>

<p>
HTTP 身份验证框架的某些方面会对新的身份验证方案是否可行进行了约束：
</p>

<ul class="org-ul">
<li>HTTP 身份验证假定是无状态的，即验证一个请求的所有必要的信息 <b>必须</b> 提供在该请求当中，而不是依赖服务器记住之前的请求。身份验证基于或受限于底层连接方面的内容已超出本规范的范畴，以及除非采取措施来确保连接不能够被非验证的用户所使用，否则本质上是有缺陷的（见<a href="RFC7230.html#ID-e2d9bed8-d6ca-4b5d-ab4a-6b2b2576393e">【RFC7230】章节 2.3</a>）。</li>
<li>身份验证参数 <code>realm</code> 是用作定义保护空间（<a href="#org080522a">章节 2.2</a>）而保留的。新的方案 <b>禁止</b> 以其定义不相容的方式来使用这个参数。</li>
<li><code>token68</code> 标记的引入是为了兼容目前已存在的身份验证方案，在每一个质询或凭证当中它只能使用一次。所以，新的方案应该使用 <code>auth-param</code> 句法来替代，否则将来不可能再扩展。</li>
<li>对质询和凭证的解析是由本规范所定义的，新的身份验证方案不能够更改它。当使用了 <code>auth-param</code> 句法，所有参数应该都支持 <code>token</code> 和 <code>quoted-string</code> 两种句法，并且句法上的约束应该定义在解析后的字段值上（也就是说，<code>quoted-string</code> 处理）。为了接收端能够使用通用的解析器来应用到所有身份验证方案当中，这是非常必要的。
<b>注意：</b> 事实上将 <code>realm</code> 参数的值的句法限制为 <code>quoted-string</code> 确实是一个糟糕的设计选择，不应该在新的参数再重复使用这种设计。</li>
<li>定义新方案时应该定义对未知的扩展参数的处置方式。通常情况下，“<ruby>必须忽略<rt>must-ignore</rt></ruby>”的规则的优先级要高于“<ruby>必须理解<rt>must-understand</rt></ruby>”的规则，否则的话在遗留的旧接收端面前引入新参数时将变得非常困难。还有，最好描述一下定义新参数的策略（比如“更新规范”或者“使用这个条目”）。</li>
<li>身份验证方案需要注明它们是否可以用于<ruby>源服务器的身份验证<rt>origin-server authentication</rt></ruby>（即，使用 <code>WWW-Authenticate</code>），以及/或者<ruby>代理身份验证<rt>proxy authentication</rt></ruby>（即，使用 <code>Proxy-Authenticate</code>）。</li>
<li><code>Authorization</code> 头字段所装载的凭证是特定于用户代理的，因此，与作为 "private" 的 Cache-Control 响应指令的 HTTP 缓存具有相同的效果，在它们出现的请求范围内。
所以，选择不在 <code>Authorization</code> 头字段中装载凭证（比如，使用一个新定义的头字段来装载）的那些新身份验证方案将需要显式地禁用缓存，可以通过使用 <code>Cache-Control</code> 请求指令（比如，"no-store"，<a href="RFC7234.html#ID-0b69ee34-0121-454f-a6b3-1d0ddacb3cba">【RFC7234】章节 5.2.1.5</a>）或者响应指令（比如，"private"）。</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgea27146" class="outline-3">
<h3 id="orgea27146">5.2. 状态码登记表 / Status Code Registration</h3>
<div class="outline-text-3" id="text-orgea27146">
<blockquote>
<p>
The "Hypertext Transfer Protocol (HTTP) Status Code Registry" located at <a href="http://www.iana.org/assignments/http-status-codes">http://www.iana.org/assignments/http-status-codes</a> has been updated with the registrations below:
</p>
</blockquote>

<p>
《超文本传输协议（HTTP）状态码登记表》位于 <a href="http://www.iana.org/assignments/http-status-codes">http://www.iana.org/assignments/http-status-codes</a>，已经更新了以下登记项。
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Value</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">401</td>
<td class="org-left">Unauthorized</td>
<td class="org-left"><a href="#orgea53663">Section 3.1</a></td>
</tr>

<tr>
<td class="org-right">407</td>
<td class="org-left">Proxy Authentication Required</td>
<td class="org-left"><a href="#org0638ce0">Section 3.2</a></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgb3ce7fc" class="outline-3">
<h3 id="orgb3ce7fc">5.3. 头字段登记表 / Header Field Registration</h3>
<div class="outline-text-3" id="text-orgb3ce7fc">
<blockquote>
<p>
HTTP header fields are registered within the "Message Headers" registry maintained at <a href="http://www.iana.org/assignments/message-headers/">http://www.iana.org/assignments/message-headers/</a>.
</p>
</blockquote>

<p>
HTTP 头字段被登记在《消息头部》登记表中，并维护在 <a href="http://www.iana.org/assignments/message-headers/">http://www.iana.org/assignments/message-headers/</a>。
</p>

<blockquote>
<p>
This document defines the following HTTP header fields, so the "Permanent Message Header Field Names" registry has been updated accordingly (see [BCP90]).
</p>
</blockquote>

<p>
本文档定义了以下 HTTP 头字段，因此它们相关联的登记项已经根据以下永久登记条目进行更新（见【<a href="https://tools.ietf.org/html/rfc3864">BCP90</a>】）：
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Header Field Name</th>
<th scope="col" class="org-left">Protocol</th>
<th scope="col" class="org-left">Status</th>
<th scope="col" class="org-left">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Authorization</td>
<td class="org-left">http</td>
<td class="org-left">standard</td>
<td class="org-left"><a href="#org83ecc17">Section 4.2</a></td>
</tr>

<tr>
<td class="org-left">Proxy-Authenticate</td>
<td class="org-left">http</td>
<td class="org-left">standard</td>
<td class="org-left"><a href="#org440e962">Section 4.3</a></td>
</tr>

<tr>
<td class="org-left">Proxy-Authorization</td>
<td class="org-left">http</td>
<td class="org-left">standard</td>
<td class="org-left"><a href="#org18ce3e0">Section 4.4</a></td>
</tr>

<tr>
<td class="org-left">WWW-Authenticate</td>
<td class="org-left">http</td>
<td class="org-left">standard</td>
<td class="org-left"><a href="#orgfa32f4b">Section 4.1</a></td>
</tr>
</tbody>
</table>

<blockquote>
<p>
The change controller is: "IETF (iesg@ietf.org) - Internet Engineering Task Force".
</p>
</blockquote>

<p>
主管以上条目的变更的是 "IETF (iesg@ietf.org) - Internet Engineering Task Force"。
</p>
</div>
</div>
</div>

<div id="outline-container-org14b4942" class="outline-2">
<h2 id="org14b4942">6. 安全注意事项 / Security Considerations</h2>
<div class="outline-text-2" id="text-org14b4942">
<blockquote>
<p>
This section is meant to inform developers, information providers, and users of known security concerns specific to HTTP authentication. More general security considerations are addressed in HTTP messaging [RFC7230] and semantics [RFC7231].
</p>
</blockquote>

<p>
本章节是为了告诉开发者、信息提供商、以及用户，HTTP 身份验证相关的安全注意事项。《消息句法和路由》【<a href="RFC7230.html">RFC7230</a>】以及《语义和内容》【<a href="RFC7231.html">RFC7231</a>】有更广泛的安全注意事项。
</p>

<blockquote>
<p>
Everything about the topic of HTTP authentication is a security consideration, so the list of considerations below is not exhaustive. Furthermore, it is limited to security considerations regarding the authentication framework, in general, rather than discussing all of the potential considerations for specific authentication schemes (which ought to be documented in the specifications that define those schemes). Various organizations maintain topical information and links to current research on Web application security (e.g., [OWASP]), including common pitfalls for implementing and using the authentication schemes found in practice.
</p>
</blockquote>

<p>
所有关于 HTTP 身份验证的话题可以概括为一种安全性的考虑，因此，下文中所列举的注意事项并不能囊括所有。再者，下文仅讨论<ruby>身份验证框架<rt>authentication framework</rt></ruby>相关的宏观安全注意事项，而不是针对<ruby>具体的身份验证方案<rt>specific authentication schemes</rt></ruby>来讨论其所有潜在的风险（这应该由定义该方案的规范文档来记录）。网络应用安全性相关（包括实现或者实践使用某种身份验证方案时常见的陷阱）的最新研究的专题信息和链接由许多组织共同维护（比如，【<a href="https://www.owasp.org/index.php/Main_Page">OWASP</a>】）。
</p>
</div>

<div id="outline-container-orgb74e19f" class="outline-3">
<h3 id="orgb74e19f"><a id="ID-2918532f-0cd3-451c-a1d1-ef0c089539b8"></a>6.1. 证书凭证的保密性 / Confidentiality of Credentials</h3>
<div class="outline-text-3" id="text-orgb74e19f">
<blockquote>
<p>
The HTTP authentication framework does not define a single mechanism for maintaining the confidentiality of credentials; instead, each authentication scheme defines how the credentials are encoded prior to transmission. While this provides flexibility for the development of future authentication schemes, it is inadequate for the protection of existing schemes that provide no confidentiality on their own, or that do not sufficiently protect against replay attacks. Furthermore, if the server expects credentials that are specific to each individual user, the exchange of those credentials will have the effect of identifying that user even if the content within credentials remains confidential.
</p>
</blockquote>

<p>
HTTP 身份验证框架并没不是定义一种单一的机制来维护证书凭证的机密性，而是由每一种身份验证方案自己来定义证书凭证在传输之前是如何编码的。默认这种设计为未来开发新的身份验证方案提供了灵活性，但是，对于现有的自身没有设计保密机制的方案（或者没有足够能力对抗<ruby>重放攻击<rt>replay attack</rt></ruby>的那些方案）来说，它并不能提供足够的保护。再者，如果服务器要求每一个独立用户都有专门的证书凭证，那么，在交换证书凭证的过程中，用户可能会因此被唯一标识出，即使证书的内容仍然具有保密性。
</p>

<blockquote>
<p>
译注：重放攻击可看<a href="https://baike.baidu.com/item/%E9%87%8D%E6%94%BE%E6%94%BB%E5%87%BB">百度百科对它的解释</a>。
</p>
</blockquote>

<blockquote>
<p>
HTTP depends on the security properties of the underlying transport- or session-level connection to provide confidential transmission of header fields. In other words, if a server limits access to authenticated users using this framework, the server needs to ensure that the connection is properly secured in accordance with the nature of the authentication scheme used. For example, services that depend on individual user authentication often require a connection to be secured with TLS ("Transport Layer Security", [RFC5246]) prior to exchanging any credentials.
</p>
</blockquote>

<p>
HTTP 依赖以 <code>transport-</code> 为前缀的安全属性或者<ruby>会话级别的连接<rt>session-level connection</rt></ruby>来为头字段提供保密传输。也就是说，如果一个服务器限制了对使用本框架的已验证用户的访问，服务器需要确保连接的安全性与所使用身份验证方案的性质一致。例如，依赖独立用户身份验证的服务通常会要求在交换任何证书凭证之前，使用 TLS 连接（"Transport Layer Security"，【<a href="https://tools.ietf.org/html/rfc5246">RFC5246</a>】）。
</p>
</div>
</div>

<div id="outline-container-org069b25f" class="outline-3">
<h3 id="org069b25f">6.2. 身份验证证书凭证和空闲客户端 / Authentication Credentials and Idle Clients</h3>
<div class="outline-text-3" id="text-org069b25f">
<blockquote>
<p>
Existing HTTP clients and user agents typically retain authentication information indefinitely. HTTP does not provide a mechanism for the origin server to direct clients to discard these cached credentials, since the protocol has no awareness of how credentials are obtained or managed by the user agent. The mechanisms for expiring or revoking credentials can be specified as part of an authentication scheme definition.
</p>
</blockquote>

<p>
现有的 HTTP 客户端和用户代理常常会无限期保留身份验证信息。HTTP 并没有提供任何机制来让源服务器去引导客户端丢弃那些缓存过的证书凭证，这是因为协议本身并不清楚用户代理是如何获得或者管理证书凭证的。对证书凭证的过期或者撤销机制可以作为一种身份验证方案定义的一部分。
</p>

<blockquote>
<p>
Circumstances under which credential caching can interfere with the application's security model include but are not limited to:
</p>

<ul class="org-ul">
<li>Clients that have been idle for an extended period, following which the server might wish to cause the client to re-prompt the user for credentials.</li>
<li>Applications that include a session termination indication (such as a "logout" or "commit" button on a page) after which the server side of the application "knows" that there is no further reason for the client to retain the credentials.</li>
</ul>
</blockquote>

<p>
以下证书凭证的缓存行为会妨碍到应用程序的安全模型，包括但不限于：
</p>

<ul class="org-ul">
<li>客户端已经闲置了很长一段时间，随后服务器可能希望让客户端对用户重新认证。</li>
<li>应用程序包含一种会话终止的指令（比如页面中的“退出登录”或者“提交”按钮），之后服务端程序“知道”客户端不再有保留证书凭证的必要了。</li>
</ul>

<blockquote>
<p>
User agents that cache credentials are encouraged to provide a readily accessible mechanism for discarding cached credentials under user control.
</p>
</blockquote>

<p>
鼓励用户代理在缓存证书凭证的同时，可以提供一种便捷的撤销证书凭证的机制给到用户来控制。
</p>
</div>
</div>

<div id="outline-container-org282f653" class="outline-3">
<h3 id="org282f653">6.3. 保护空间 / Protection Spaces</h3>
<div class="outline-text-3" id="text-org282f653">
<blockquote>
<p>
Authentication schemes that solely rely on the "realm" mechanism for establishing a protection space will expose credentials to all resources on an origin server. Clients that have successfully made authenticated requests with a resource can use the same authentication credentials for other resources on the same origin server. This makes it possible for a different resource to harvest authentication credentials for other resources.
</p>
</blockquote>

<p>
如果身份验证方案仅仅依靠 "realm" 机制来建立保持空间，那么证书凭证会暴露给源服务器里的所有资源当中。客户端向某一个资源发起身份验证请求成功以后，就可以使用同一个身份验证凭证访问同一个源服务器里的其他资源。这样使得一个不同的资源来收割其他资源的身份验证凭证成为可能。
</p>

<blockquote>
<p>
This is of particular concern when an origin server hosts resources for multiple parties under the same canonical root URI (Section 2.2). Possible mitigation strategies include restricting direct access to authentication credentials (i.e., not making the content of the <code>Authorization</code> request header field available), and separating protection spaces by using a different host name (or port number) for each party.
</p>
</blockquote>

<p>
当一个源服务器在同一个<ruby>规范化根 URI<rt>canonical root URI</rt></ruby> （<a href="#org080522a">章节 2.2</a>）上为多个团体托管资源的时候，上述这种现象更值得重视。可以缓解上述问题的策略包括：限制直接访问身份验证凭证（也就是说，不要公开 <code>Authorization</code> 请求头字段），以及为每一个团体分配一个不同的主机名称（或者端口号）来分隔保护空间。
</p>
</div>
</div>
</div>

<div id="outline-container-orgaabb94b" class="outline-2">
<h2 id="orgaabb94b">7. 鸣谢 / Acknowledgments</h2>
<div class="outline-text-2" id="text-orgaabb94b">
<blockquote>
<p>
This specification takes over the definition of the HTTP Authentication Framework, previously defined in RFC 2617. We thank John Franks, Phillip M. Hallam-Baker, Jeffery L. Hostetler, Scott D. Lawrence, Paul J. Leach, Ari Luotonen, and Lawrence C. Stewart for their work on that specification. See Section 6 of [RFC2617] for further acknowledgements.
</p>
</blockquote>

<blockquote>
<p>
See Section 10 of [RFC7230] for the Acknowledgments related to this document revision.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-orgadc8467" class="outline-2">
<h2 id="orgadc8467">8. 参考资料 / References</h2>
<div class="outline-text-2" id="text-orgadc8467">
</div>
<div id="outline-container-org3b0c3db" class="outline-3">
<h3 id="org3b0c3db">8.1. 规范性参考资料 / Normative References</h3>
<div class="outline-text-3" id="text-org3b0c3db">
<dl class="org-dl">
<dt>[RFC2119]</dt><dd>Bradner, S., “Key words for use in RFCs to Indicate Requirement Levels”, BCP 14, RFC 2119, March 1997.</dd>
<dt>[RFC5234]</dt><dd>Crocker, D., Ed. and P. Overell, “Augmented BNF for Syntax Specifications: ABNF”, STD 68, RFC 5234, January 2008.</dd>
<dt>[RFC7230]</dt><dd>Fielding, R., Ed. and J. Reschke, Ed., “Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing”, RFC 7230, June 2014.</dd>
<dt>[RFC7231]</dt><dd>Fielding, R., Ed. and J. Reschke, Ed., “Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content”, RFC 7231, June 2014.</dd>
<dt>[RFC7234]</dt><dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “Hypertext Transfer Protocol (HTTP/1.1): Caching”, RFC 7234, June 2014.</dd>
</dl>
</div>
</div>

<div id="outline-container-org5a54f2f" class="outline-3">
<h3 id="org5a54f2f">8.2. 信息性参考资料 / Informative References</h3>
<div class="outline-text-3" id="text-org5a54f2f">
<dl class="org-dl">
<dt>[BCP90]</dt><dd>Klyne, G., Nottingham, M., and J. Mogul, “Registration Procedures for Message Header Fields”, BCP 90, RFC 3864, September 2004.</dd>
<dt>[OWASP]</dt><dd>van der Stock, A., Ed., “A Guide to Building Secure Web Applications and Web Services”, The Open Web Application Security Project (OWASP) 2.0.1, July 2005, <a href="https://www.owasp.org/">https://www.owasp.org/</a>.</dd>
<dt>[RFC2616]</dt><dd>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, “Hypertext Transfer Protocol &#x2013; HTTP/1.1”, RFC 2616, June 1999.</dd>
<dt>[RFC2617]</dt><dd>Franks, J., Hallam-Baker, P., Hostetler, J., Lawrence, S., Leach, P., Luotonen, A., and L. Stewart, “HTTP Authentication: Basic and Digest Access Authentication”, RFC 2617, June 1999.</dd>
<dt>[RFC3986]</dt><dd>Berners-Lee, T., Fielding, R., and L. Masinter, “Uniform Resource Identifier (URI): Generic Syntax”, STD 66, RFC 3986, January 2005.</dd>
<dt>[RFC4648]</dt><dd>Josefsson, S., “The Base16, Base32, and Base64 Data Encodings”, RFC 4648, October 2006.</dd>
<dt>[RFC5226]</dt><dd>Narten, T. and H. Alvestrand, “Guidelines for Writing an IANA Considerations Section in RFCs”, BCP 26, RFC 5226, May 2008.</dd>
<dt>[RFC5246]</dt><dd>Dierks, T. and E. Rescorla, “The Transport Layer Security (TLS) Protocol Version 1.2”, RFC 5246, August 2008.</dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-org1994bab" class="outline-2">
<h2 id="org1994bab">附录 A：相对 RFC 2616 和 2617 的变化 / Appendix A. Changes from RFCs 2616 and 2617</h2>
<div class="outline-text-2" id="text-org1994bab">
<blockquote>
<p>
The framework for HTTP Authentication is now defined by this document, rather than RFC 2617.
</p>
</blockquote>

<p>
HTTP 身份验证框架现在由本文档所定义，不再是 RFC 2617。
</p>

<blockquote>
<p>
The "realm" parameter is no longer always required on challenges; consequently, the ABNF allows challenges without any auth parameters. (<a href="#orgd266e6f">Section 2</a>)
</p>
</blockquote>

<p>
<code>realm</code> 参数不再总是要求无质询，因此，它的 ABNF 规则允许在没有任何 auth 参数的情况下的 challenges。（<a href="#orgd266e6f">章节2</a>）
</p>

<blockquote>
<p>
The "token68" alternative to <code>auth-param</code> lists has been added for consistency with legacy authentication schemes such as "Basic". (<a href="#orgd266e6f">Section 2</a>)
</p>
</blockquote>

<p>
为了与遗留的身份验证方案（比如，"Basic"）一致，添加了替换 <code>auth-param</code> 列表的 "token68"。（<a href="#orgd266e6f">章节2</a>）
</p>

<blockquote>
<p>
This specification introduces the Authentication Scheme Registry, along with considerations for new authentication schemes. (Section 5.1)
</p>
</blockquote>

<p>
本规范引进了身份验证方案登记表，以及对于新的身份验证方案的注意事项。
</p>
</div>
</div>

<div id="outline-container-org48a9208" class="outline-2">
<h2 id="org48a9208">附录 B：引进的 ABNF / Appendix B. Imported ABNF</h2>
<div class="outline-text-2" id="text-org48a9208">
<blockquote>
<p>
The following core rules are included by reference, as defined in <a href="https://tools.ietf.org/html/rfc5234#appendix-B.1">Appendix B.1</a> of [RFC5234]: <code>ALPHA</code> (letters), <code>CR</code> (carriage return), <code>CRLF</code> (CR LF), <code>CTL</code> (controls), <code>DIGIT</code> (decimal 0-9), <code>DQUOTE</code> (double quote), <code>HEXDIG</code> (hexadecimal 0-9/A-F/a-f), <code>LF</code> (line feed), <code>OCTET</code> (any 8-bit sequence of data), <code>SP</code> (space), and <code>VCHAR</code> (any visible US-ASCII character).
</p>
</blockquote>

<p>
本规范引用了以下定义在<a href="https://tools.ietf.org/html/rfc5234#appendix-B.1">【RFC5234】附录 B.1</a> 中的核心规则：<code>ALPHA</code> （字母）、<code>CR</code> （回车符）、<code>CRLF</code> （回车换行符）、<code>CTL</code> （控制字符）、<code>DIGIT</code> （十进制数字 0-9）、<code>DQUOTE</code> （双引号）、<code>HEXDIG</code> （十六进制数字 0-9/A-F/a-f）、<code>HTAB</code> （水平制表符）、<code>LF</code> （换行符）、<code>OCTET</code> （八位组字节）、<code>SP</code> （空白）以及 <code>VCHAR</code> （【USASCII】可见字符）。
</p>

<blockquote>
<p>
The rules below are defined in [RFC7230]:
</p>
</blockquote>

<p>
以下规则定义在【<a href="RFC7230.html">RFC7230</a>】中：
</p>

<div class="org-src-container">
<pre class="src src-text">BWS           = &lt;BWS, see [RFC7230], Section 3.2.3&gt;
OWS           = &lt;OWS, see [RFC7230], Section 3.2.3&gt;
quoted-string = &lt;quoted-string, see [RFC7230], Section 3.2.6&gt;
token         = &lt;token, see [RFC7230], Section 3.2.6&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgacfc244" class="outline-2">
<h2 id="orgacfc244">附录 C：ABNF 集合 / Appendix C. Collected ABNF</h2>
<div class="outline-text-2" id="text-orgacfc244">
<blockquote>
<p>
In the collected ABNF below, list rules are expanded as per Section 1.2 of [RFC7230].
</p>
</blockquote>

<p>
下列 ABNF 规则集合中，列表规则是在<a href="RFC7230.html#ID-f8234cb5-154d-4daf-82fd-ed54ac75cf8b">【RFC7230】章节 1.2</a> 所扩充的。
</p>

<div class="org-src-container">
<pre class="src src-text">Authorization = credentials

BWS = &lt;BWS, see [RFC7230], Section 3.2.3&gt;

OWS = &lt;OWS, see [RFC7230], Section 3.2.3&gt;

Proxy-Authenticate = *( "," OWS ) challenge *( OWS "," [ OWS
 challenge ] )
Proxy-Authorization = credentials

WWW-Authenticate = *( "," OWS ) challenge *( OWS "," [ OWS challenge
 ] )

auth-param = token BWS "=" BWS ( token / quoted-string )
auth-scheme = token

challenge = auth-scheme [ 1*SP ( token68 / [ ( "," / auth-param ) *(
 OWS "," [ OWS auth-param ] ) ] ) ]
credentials = auth-scheme [ 1*SP ( token68 / [ ( "," / auth-param )
 *( OWS "," [ OWS auth-param ] ) ] ) ]

quoted-string = &lt;quoted-string, see [RFC7230], Section 3.2.6&gt;

token = &lt;token, see [RFC7230], Section 3.2.6&gt;
token68 = 1*( ALPHA / DIGIT / "-" / "." / "_" / "~" / "+" / "/" )
 *"="
</pre>
</div>
</div>
</div>

<div id="outline-container-org9358a53" class="outline-2">
<h2 id="org9358a53">索引 / Index</h2>
</div>

<div id="outline-container-org6c1e403" class="outline-2">
<h2 id="org6c1e403">Authors' Addresses</h2>
<div class="outline-text-2" id="text-org6c1e403">
<pre class="example">
Roy T. Fielding (editor)
Adobe Systems Incorporated
345 Park Ave
San Jose, CA 95110
USA
Email: fielding@gbiv.com
URI: http://roy.gbiv.com/
</pre>

<pre class="example">
Julian F. Reschke (editor)
greenbytes GmbH
Hafenweg 16
Muenster, NW 48155
Germany
Email: julian.reschke@greenbytes.de
URI: http://greenbytes.de/tech/webdav/
</pre>

<pre class="example">
阿多（译者）
</pre>
</div>
</div>
</div>
</body>
</html>
